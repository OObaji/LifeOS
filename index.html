<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LifeOS - Second Brain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'], hand: ['Kalam', 'cursive'] },
                    colors: { zinc: { 50: '#fafafa', 100: '#f4f4f5', 200: '#e4e4e7', 300: '#d4d4d8', 400: '#a1a1aa', 500: '#71717a', 600: '#52525b', 700: '#3f3f46', 800: '#27272a', 850: '#1f1f22', 900: '#18181b', 950: '#09090b' }, indigo: { 500: '#6366f1', 600: '#4f46e5', 900: '#312e81' } },
                    boxShadow: { 'glow': '0 0 15px rgba(79, 70, 229, 0.4)', 'glow-sm': '0 0 10px rgba(79, 70, 229, 0.2)' }
                }
            }
        }
    </script>
    <style>
        body { -webkit-font-smoothing: antialiased; touch-action: manipulation; }
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d4d4d8; border-radius: 2px; }
        .dark ::-webkit-scrollbar-thumb { background: #3f3f46; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes pulse-brain { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.05); opacity: 1; } }
        .animate-brain { animation: pulse-brain 4s infinite ease-in-out; }
        
        /* Shimmer effect for loading */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        .animate-shimmer {
            background: linear-gradient(90deg, transparent 25%, rgba(99, 102, 241, 0.1) 50%, transparent 75%);
            background-size: 1000px 100%;
            animation: shimmer 2s infinite linear;
        }
    </style>
</head>
<body class="bg-zinc-50 text-zinc-900 dark:bg-zinc-950 dark:text-zinc-100 min-h-screen overflow-y-auto selection:bg-indigo-500/30 selection:text-indigo-600 dark:selection:text-indigo-200 transition-colors duration-300">
    <div id="root"></div>
    <script type="module">
        import React, { useState, useEffect, useRef, useMemo } from "https://esm.sh/react@18.2.0";
        import { createRoot } from "https://esm.sh/react-dom@18.2.0/client";
        import { 
            Layout, Home, BookOpen, Target, PenTool, Settings, Search, Bell, Plus, 
            MoreHorizontal, CheckCircle2, Clock, ArrowRight, Brain, Layers, 
            Calendar as CalendarIcon, ChevronRight, Sun, Moon, Filter, Zap, Coffee, 
            Video, MapPin, RefreshCw, MoreVertical, Lightbulb, Sparkles, Trash2, 
            Sprout, Briefcase, DollarSign, Move, Eraser, Palette, MousePointer2, 
            Trophy, Flag, TrendingUp, Award, Crosshair, Star, Bookmark, Book, 
            GraduationCap, Wallet, Building, Users, ExternalLink, Link as LinkIcon, 
            PlayCircle, Film, Music, Gamepad2, MonitorPlay, Headphones, Tv, 
            MessageSquare, AlertCircle, Folder, Minus, CalendarDays, LogOut, Lock, 
            Fingerprint, Delete, KeyRound, ShieldQuestion, RotateCcw, Menu, X, Save, Edit3, Wifi, WifiOff, Database,
            Timer, Play, Pause, Wrench, File, CreditCard, Coins, Heart, Activity, Scissors, Share2, Mail, Archive, Image,
            Cloud, CloudRain, CloudSun, CloudSnow, CloudLightning, Thermometer,
            List, Grid, Columns, Utensils, FileText, Trash, ShieldAlert, Flame, Volume2, ChevronLeft,
            ListTodo, ArrowUpRight, CheckSquare, Flower2, Dumbbell, Github, Bot, Newspaper, QrCode,
            Waves, Wind, Mountain, Footprints, Ban, ShieldCheck, Milestone, User, LogIn, ArrowLeft, Info,
            Eye, EyeOff, Hourglass, AlertTriangle, Check, Cpu, Scroll, Gift, ShoppingBag, Code2, Terminal, Library, Globe, Laptop, Smartphone, Wand2, Chrome,
            Calendar, Loader2, CalendarRange
        } from "https://esm.sh/lucide-react@0.344.0?deps=react@18.2.0";
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2.39.3';

        const DEFAULT_SB_URL = 'https://ttwckxjplibzwllloees.supabase.co';
        const DEFAULT_SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0d2NreGpwbGliendsbGxvZWVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2MTg2MTQsImV4cCI6MjA4NDE5NDYxNH0.Bbv7XOw975bdqdJlclG7WGyUl5x2WleEjDomDjNrJg0';
        const STORED_URL = localStorage.getItem('lifeos_sb_url') || DEFAULT_SB_URL;
        const STORED_KEY = localStorage.getItem('lifeos_sb_key') || DEFAULT_SB_KEY;
        let supabase = null;
        let isSupabaseConfigured = false;
        if (STORED_URL && STORED_KEY) { try { supabase = createClient(STORED_URL, STORED_KEY); isSupabaseConfigured = true; } catch(e) { console.error("Supabase Init Failed", e); } }

        const generateUUID = () => { if (typeof crypto !== 'undefined' && crypto.randomUUID) { return crypto.randomUUID(); } return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); }); };
        const LocalAuth = { user: JSON.parse(localStorage.getItem('lifeos_user')) || null, login: (email, password) => { if (password.length < 3) throw new Error("Password too short"); const user = { id: 'local_user', email, isLocal: true }; localStorage.setItem('lifeos_user', JSON.stringify(user)); return user; }, signup: (email, password) => LocalAuth.login(email, password), logout: () => { localStorage.removeItem('lifeos_user'); return null; } };
        const ICON_LIB = { 'Globe': Globe, 'Code2': Code2, 'Terminal': Terminal, 'Database': Database, 'Layout': Layout, 'Palette': Palette, 'PenTool': PenTool, 'Image': Image, 'Film': Film, 'Music': Music, 'Gamepad': Gamepad2, 'Bot': Bot, 'Mail': Mail, 'MessageSquare': MessageSquare, 'Github': Github, 'Twitter': Share2, 'DollarSign': DollarSign, 'CreditCard': CreditCard, 'Book': Book, 'GraduationCap': GraduationCap, 'Laptop': Laptop, 'Smartphone': Smartphone, 'Monitor': MonitorPlay, 'Cloud': Cloud, 'Link': LinkIcon };

        const DEFAULT_GOALS_DATA = { mission: "Reshape my life by achieving financial stability, building iron discipline, and gaining clear direction for my future.", mainFocus: [{id: '1', text: 'Financial Freedom'}, {id: '2', text: 'Improved Fitness'}, {id: '3', text: 'Skill Mastery'}], dos: [], donts: [], milestones: [], quarters: { q1: [], q2: [], q3: [], q4: [] }, phases: { phase1: [], phase2: [], phase3: [] } };
        const DEFAULT_MEALS = [{ day: 'Monday', type: 'Breakfast', text: 'Oats + milk\n1 banana\n1 scoop protein powder' }];
        const DEFAULT_TOOLS_CATEGORIES = ['General', 'Development', 'Design', 'Productivity', 'Finance'];
        const DEFAULT_BOOK_CATEGORIES = ['General', 'Fiction', 'Non-Fiction', 'Self-Help', 'Technical'];
        const DEFAULT_TOOLS = [{ id: 't1', category: 'General', name: 'ChatGPT', url: 'https://chat.openai.com/', icon: 'Bot' }];
        const GYM_WORKOUT_PLAN = [ { id: 'gym1', title: "Day 1: Chest & Triceps", icon: "Flame", color: "text-rose-500", warmup: ["5min Treadmill", "Arm Circles"], exercises: [{ name: "Bench Press", sets: "4", reps: "8-10" }, { name: "Incline DB Press", sets: "3", reps: "10-12" }, { name: "Cable Flys", sets: "3", reps: "12-15" }, { name: "Tricep Pushdowns", sets: "4", reps: "12-15" }, { name: "Skullcrushers", sets: "3", reps: "10-12" }], finisher: "Pushup burnout" }, { id: 'gym2', title: "Day 2: Back & Biceps", icon: "Activity", color: "text-blue-500", warmup: ["5min Rower", "Band Pull-aparts"], exercises: [{ name: "Lat Pulldowns", sets: "4", reps: "10-12" }, { name: "Seated Cable Row", sets: "4", reps: "10-12" }, { name: "DB Row", sets: "3", reps: "10/side" }, { name: "Barbell Curls", sets: "3", reps: "10-12" }, { name: "Hammer Curls", sets: "3", reps: "12" }], finisher: "Face Pulls 3x15" }, { id: 'gym3', title: "Day 3: Legs", icon: "Dumbbell", color: "text-emerald-500", warmup: ["Bodyweight Squats", "Leg Swings"], exercises: [{ name: "Barbell Squats", sets: "4", reps: "6-8" }, { name: "Leg Press", sets: "3", reps: "10-12" }, { name: "RDLs", sets: "4", reps: "10" }, { name: "Leg Extensions", sets: "3", reps: "15" }, { name: "Calf Raises", sets: "4", reps: "15-20" }], finisher: "Walking Lunges" }, { id: 'gym4', title: "Day 4: Shoulders & Abs", icon: "Zap", color: "text-purple-500", warmup: ["Dislocations", "Light DB press"], exercises: [{ name: "Overhead Press", sets: "4", reps: "8-10" }, { name: "Lateral Raises", sets: "4", reps: "12-15" }, { name: "Front Plate Raise", sets: "3", reps: "12" }, { name: "Cable Crunches", sets: "4", reps: "15" }, { name: "Leg Raises", sets: "3", reps: "12" }], finisher: "Plank (3 x 1 min)" } ];
        const HOME_WORKOUT_PLAN = [ { id: 'home1', title: "Day 1: Upper Push (DB)", icon: "Flame", color: "text-orange-500", warmup: ["Jumping Jacks"], exercises: [{ name: "DB Floor Press", sets: "4", reps: "12" }, { name: "Pushups", sets: "3", reps: "Failure" }, { name: "Shoulder Press", sets: "4", reps: "12" }, { name: "Lateral Raises", sets: "3", reps: "15" }], finisher: "Pushups to failure" }, { id: 'home2', title: "Day 2: Lower Body (DB)", icon: "Activity", color: "text-blue-500", warmup: ["Squats"], exercises: [{ name: "Goblet Squats", sets: "4", reps: "15" }, { name: "DB RDL", sets: "4", reps: "12" }, { name: "Lunges", sets: "3", reps: "12/leg" }], finisher: "Wall Sit" }, { id: 'home3', title: "Day 3: Full Body", icon: "Zap", color: "text-emerald-500", warmup: ["Run 10 mins"], exercises: [{ name: "Burpees", sets: "4", reps: "10" }, { name: "Thrusters", sets: "3", reps: "12" }, { name: "Renegade Rows", sets: "3", reps: "10/side" }], finisher: "Mountain Climbers" }, { id: 'home4', title: "Day 4: Core & Cardio", icon: "Heart", color: "text-rose-500", warmup: ["High Knees"], exercises: [{ name: "Plank", sets: "4", reps: "1 min" }, { name: "Leg Raises", sets: "3", reps: "15" }, { name: "Russian Twists", sets: "3", reps: "20" }], finisher: "Sprints" } ];
        const FOCUS_SOUNDS = [ { id: 'rain', label: 'Rain', icon: CloudRain, url: 'https://cdn.pixabay.com/audio/2021/09/06/audio_2e22c07659.mp3' }, { id: 'lofi', label: 'Lofi', icon: Music, url: 'https://cdn.pixabay.com/audio/2022/05/27/audio_1808fbf07a.mp3' } ];

        const Card = ({ children, className = "", title, action }) => ( React.createElement("div", { className: `bg-white/80 dark:bg-zinc-900/60 backdrop-blur-xl border border-zinc-200 dark:border-white/5 rounded-2xl p-5 flex flex-col transition-all duration-300 hover:border-zinc-300 dark:hover:border-zinc-700/50 shadow-sm dark:shadow-none ${className}` }, (title || action) && ( React.createElement("div", { className: "flex justify-between items-center mb-4 border-b border-zinc-100 dark:border-white/5 pb-2" }, title && React.createElement("h3", { className: "text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest flex items-center gap-2" }, React.createElement("span", { className: "w-1.5 h-1.5 rounded-full bg-indigo-500 inline-block" }), title), action) ), children) );
        const NavItem = ({ icon: Icon, label, active, onClick }) => ( React.createElement("button", { onClick: onClick, className: `w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden ${active ? 'text-zinc-900 dark:text-white bg-zinc-100 dark:bg-white/5' : 'text-zinc-600 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-white/5'}` }, active && React.createElement("div", { className: "absolute inset-y-0 left-0 w-1 bg-indigo-500 rounded-r-full" }), React.createElement(Icon, { size: 18, className: active ? 'text-indigo-500 dark:text-indigo-400' : 'opacity-70' }), React.createElement("span", { className: "font-medium text-sm tracking-wide" }, label)) );
        const MobileTopBar = ({ handleLogout, user, darkMode, toggleDarkMode, onProfileClick }) => ( React.createElement("header", { className: "md:hidden fixed top-0 left-0 right-0 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-xl border-b border-zinc-200 dark:border-zinc-800 z-50 px-4 h-14 flex items-center justify-between transition-colors duration-300" }, React.createElement("div", { className: "flex items-center gap-3" }, React.createElement("div", { className: "w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white shadow-glow" }, React.createElement(Brain, { size: 18 })), React.createElement("span", { className: "font-bold text-lg tracking-tight text-zinc-900 dark:text-white" }, "LifeOS")), React.createElement("div", { className: "flex items-center gap-2" }, React.createElement("button", { onClick: toggleDarkMode, className: "p-2 rounded-full text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all" }, darkMode ? React.createElement(Sun, { size: 18 }) : React.createElement(Moon, { size: 18 })), user && React.createElement("button", { onClick: onProfileClick, className: "w-8 h-8 rounded-full bg-zinc-200 dark:bg-zinc-800 flex items-center justify-center text-xs font-bold text-zinc-600 dark:text-zinc-400 uppercase" }, (user.user_metadata?.full_name || user.displayName || user.email)[0]))));
        const MobileNavBar = ({ activeTab, setActiveTab, tabConfig }) => { const tabs = Object.keys(tabConfig).filter(t => t !== 'profile'); return React.createElement("div", { className: "md:hidden fixed bottom-0 left-0 right-0 bg-white/90 dark:bg-zinc-950/90 backdrop-blur-xl border-t border-zinc-200 dark:border-zinc-800 z-50 px-4 py-2 pb-safe flex h-[4.5rem] shadow-[0_-5px_20px_rgba(0,0,0,0.05)] dark:shadow-[0_-5px_20px_rgba(0,0,0,0.2)] transition-colors duration-300" }, React.createElement("div", { className: "flex-1 flex overflow-x-auto no-scrollbar items-center px-2 gap-1" }, tabs.map(t => { const isActive = activeTab === t; const config = tabConfig[t]; if(!config) return null; return React.createElement("button", { key: t, onClick: () => setActiveTab(t), className: `flex flex-col items-center justify-center min-w-[3.5rem] h-full rounded-xl transition-all shrink-0 ${isActive ? 'text-indigo-600 dark:text-indigo-400 scale-110' : 'text-zinc-500 dark:text-zinc-600'}` }, React.createElement("div", { className: `p-1.5 rounded-lg mb-0.5 transition-all ${isActive ? 'bg-indigo-100 dark:bg-indigo-500/20' : 'bg-transparent'}` }, React.createElement(config.icon, { size: 20, strokeWidth: isActive ? 2.5 : 2 })), React.createElement("span", { className: "text-[9px] font-medium leading-none" }, config.label.split(' ')[0])); }))); };
        const EditableList = ({ items = [], onAdd, onToggle, onDelete, placeholder }) => { const [newItem, setNewItem] = useState(""); return React.createElement("div", { className: "space-y-2" }, items.map(item => React.createElement("div", { key: item.id, className: "flex items-start gap-3 w-full group" }, React.createElement("button", { onClick: () => onToggle(item.id), className: `mt-0.5 w-5 h-5 rounded border flex items-center justify-center shrink-0 transition-all ${item.completed ? 'bg-indigo-500 border-indigo-500 text-white' : 'border-zinc-300 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-900'}` }, React.createElement(CheckCircle2, { size: 14, className: item.completed ? "opacity-100" : "opacity-0" })), React.createElement("span", { className: `text-sm leading-snug flex-1 ${item.completed ? 'text-zinc-400 dark:text-zinc-500 line-through' : 'text-zinc-700 dark:text-zinc-200'}` }, item.text), React.createElement("button", { onClick: () => onDelete(item.id), className: "text-zinc-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" }, React.createElement(Trash, { size: 14 })))), React.createElement("div", { className: "flex gap-2 mt-2 pt-2 border-t border-zinc-100 dark:border-zinc-800" }, React.createElement("input", { type: "text", value: newItem, onChange: (e) => setNewItem(e.target.value), onKeyDown: (e) => { if (e.key === 'Enter' && newItem.trim()) { onAdd(newItem); setNewItem(""); } }, placeholder: placeholder || "Add new...", className: "flex-1 bg-transparent text-sm focus:outline-none text-zinc-600 dark:text-zinc-400 placeholder:text-zinc-400 dark:placeholder:text-zinc-600" }), React.createElement("button", { onClick: () => { if (newItem.trim()) { onAdd(newItem); setNewItem(""); } }, className: "text-indigo-500 hover:text-indigo-400" }, React.createElement(Plus, { size: 16 })))); };
        const TimeWidget = () => { const [time, setTime] = useState(new Date()); useEffect(() => { const t = setInterval(() => setTime(new Date()), 1000); return () => clearInterval(t); }, []); return React.createElement("div", { className: "text-right" }, React.createElement("div", { className: "text-3xl font-bold font-mono text-indigo-500 dark:text-indigo-400" }, time.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})), React.createElement("div", { className: "text-xs font-bold uppercase tracking-widest text-zinc-400 dark:text-zinc-500" }, time.toLocaleDateString())); };
        const AuthModal = ({ onClose, onLogin, inline = false }) => { const [isLogin, setIsLogin] = useState(true); const [email, setEmail] = useState(""); const [password, setPassword] = useState(""); const [showPassword, setShowPassword] = useState(false); const [error, setError] = useState(null); const [loading, setLoading] = useState(false); const handleSubmit = async (e) => { e.preventDefault(); setError(null); setLoading(true); if (isSupabaseConfigured) { try { const { data, error } = isLogin ? await supabase.auth.signInWithPassword({ email, password }) : await supabase.auth.signUp({ email, password }); if (error) throw error; if (data?.user) { onLogin({ email: data.user.email, id: data.user.id, isLocal: false }); if(!inline) onClose(); } } catch(err) { setError(err.message.includes("fetch") ? "Connection failed. Using Local Mode..." : err.message); if(err.message.includes("fetch")) setTimeout(handleLocalAuth, 1000); } finally { setLoading(false); } } else { handleLocalAuth(); } }; const handleLocalAuth = () => { try { const user = isLogin ? LocalAuth.login(email, password) : LocalAuth.signup(email, password); onLogin(user); if(!inline) onClose(); } catch(e) { setError(e.message); } finally { setLoading(false); } };
        const handleGoogleLogin = async () => { if (isSupabaseConfigured) { setLoading(true); const { error } = await supabase.auth.signInWithOAuth({ provider: 'google', options: { redirectTo: window.location.href } }); if (error) setError(error.message); setLoading(false); } else { setError("Cloud sync not configured. Cannot use Google Login."); } };
        const content = React.createElement("div", { className: inline ? "" : "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-8 max-w-sm w-full relative shadow-xl" }, !inline && React.createElement("button", { onClick: onClose, className: "absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200" }, React.createElement(X, { size: 20 })), React.createElement("h2", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center" }, isLogin ? "Welcome Back" : "Create Account"), React.createElement("form", { onSubmit: handleSubmit, className: "space-y-4" }, React.createElement("input", { type: "email", value: email, onChange: e => setEmail(e.target.value), placeholder: "Email", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" }), React.createElement("div", { className: "relative" }, React.createElement("input", { type: showPassword ? "text" : "password", value: password, onChange: e => setPassword(e.target.value), placeholder: "Password", className: "w-full p-3 rounded-xl bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-zinc-900 dark:text-white focus:border-indigo-500 outline-none pr-10" }), React.createElement("button", { type: "button", onClick: () => setShowPassword(!showPassword), className: "absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors" }, showPassword ? React.createElement(EyeOff, { size: 18 }) : React.createElement(Eye, { size: 18 }))), error && React.createElement("div", { className: "text-red-500 text-xs" }, error), React.createElement("button", { type: "submit", disabled: loading, className: "w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-500" }, loading ? "Processing..." : (isLogin ? "Login" : "Sign Up")), React.createElement("div", { className: "relative my-4" }, React.createElement("div", { className: "absolute inset-0 flex items-center" }, React.createElement("span", { className: "w-full border-t border-zinc-200 dark:border-zinc-700" })), React.createElement("div", { className: "relative flex justify-center text-xs uppercase" }, React.createElement("span", { className: "bg-white dark:bg-zinc-900 px-2 text-zinc-500" }, "Or continue with"))), React.createElement("button", { onClick: handleGoogleLogin, type: "button", className: "w-full py-3 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-700 dark:text-zinc-200 rounded-xl font-bold hover:bg-zinc-50 dark:hover:bg-zinc-700 flex items-center justify-center gap-2 transition-colors" }, React.createElement(Chrome, { size: 18 }), "Google"), React.createElement("div", { className: "text-center text-xs text-zinc-500 mt-4 cursor-pointer hover:text-zinc-800 dark:hover:text-white", onClick: () => setIsLogin(!isLogin) }, isLogin ? "Need an account? Sign up" : "Have an account? Login"))); return inline ? content : React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm" }, content); };
        const LandingPage = ({ onLoginSuccess, onGuestLogin }) => { return React.createElement("div", { className: "min-h-screen flex flex-col md:flex-row bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-white font-sans overflow-hidden transition-colors duration-300" }, React.createElement("div", { className: "fixed inset-0 z-0 pointer-events-none" }, React.createElement("div", { className: "absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-indigo-500/10 dark:bg-indigo-600/20 rounded-full blur-[120px]" }), React.createElement("div", { className: "absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/10 dark:bg-purple-600/10 rounded-full blur-[100px]" })), React.createElement("div", { className: "md:w-1/2 p-8 md:p-16 flex flex-col justify-center relative z-10" }, React.createElement("div", { className: "mb-8 flex items-center gap-3" }, React.createElement("div", { className: "w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-glow" }, React.createElement(Brain, { size: 20 })), React.createElement("h1", { className: "text-2xl font-bold tracking-tight text-zinc-900 dark:text-white" }, "LifeOS")), React.createElement("h2", { className: "text-5xl md:text-7xl font-bold mb-6 leading-tight tracking-tight" }, "Design Your ", React.createElement("span", { className: "text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500" }, "Mind.")), React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-lg md:text-xl max-w-md leading-relaxed mb-10" }, "A futuristic operating system for your life. Organize habits, tasks, and goals in one unified interface."), React.createElement("div", { className: "grid grid-cols-2 gap-4 max-w-sm" }, [{l:"Focus", i:Timer}, {l:"Goals", i:Flag}, {l:"Habits", i:CheckCircle2}, {l:"Health", i:Activity}].map((f, i) => React.createElement("div", { key: i, className: "flex items-center gap-3 p-3 rounded-xl bg-white/50 dark:bg-white/5 border border-zinc-200 dark:border-white/5 shadow-sm dark:shadow-none" }, React.createElement(f.i, { className: "text-indigo-500 dark:text-indigo-400", size: 18 }), React.createElement("span", { className: "text-sm font-medium text-zinc-700 dark:text-zinc-300" }, f.l))))), React.createElement("div", { className: "md:w-1/2 bg-white/30 dark:bg-black/40 backdrop-blur-xl border-l border-zinc-200 dark:border-white/5 flex flex-col justify-center p-8 md:p-16 relative z-20" }, React.createElement(AuthModal, { onClose: () => {}, onLogin: onLoginSuccess, inline: true }), React.createElement("div", { className: "mt-6 text-center" }, React.createElement("button", { onClick: () => onGuestLogin({ email: "guest@lifeos.app", displayName: "Guest", uid: "guest-user", isLocal: true }), className: "text-zinc-500 hover:text-zinc-800 dark:text-zinc-500 dark:hover:text-white text-xs font-medium transition-colors flex items-center justify-center gap-2 mx-auto" }, "Enter as Guest", React.createElement(ArrowRight, { size: 12 }))))); };

        const ProfileView = ({ user, onLogout, onUpdateProfile }) => {
            const [name, setName] = useState(user.user_metadata?.full_name || user.user_metadata?.name || user.displayName || user.email?.split('@')[0] || "User");
            const [isEditing, setIsEditing] = useState(false);
            const inputRef = useRef(null);

            useEffect(() => { if (isEditing && inputRef.current) inputRef.current.focus(); }, [isEditing]);

            const handleSave = () => { onUpdateProfile(name); setIsEditing(false); };

            return React.createElement("div", { className: "p-4 md:p-12 w-full max-w-3xl mx-auto" },
                React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white mb-8" }, "Profile"),
                React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-3xl p-8 shadow-sm" },
                    React.createElement("div", { className: "flex items-center gap-6 mb-8" },
                        React.createElement("div", { className: "w-24 h-24 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-4xl font-bold text-white shadow-lg uppercase" }, name ? name[0] : user.email[0]),
                        React.createElement("div", { className: "flex-1" },
                            React.createElement("div", { className: "mb-1" },
                                isEditing ? 
                                React.createElement("div", { className: "flex items-center gap-2" },
                                    React.createElement("input", { ref: inputRef, value: name, onChange: e => setName(e.target.value), onKeyDown: e => e.key === 'Enter' && handleSave(), className: "bg-transparent border-b-2 border-indigo-500 text-2xl font-bold text-zinc-900 dark:text-white focus:outline-none w-full max-w-[200px]" }),
                                    React.createElement("button", { onClick: handleSave, className: "p-1 bg-indigo-100 text-indigo-600 rounded-lg hover:bg-indigo-200" }, React.createElement(Check, { size: 18 }))
                                ) :
                                React.createElement("div", { className: "flex items-center gap-3 group" },
                                    React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-white" }, name),
                                    React.createElement("button", { onClick: () => setIsEditing(true), className: "text-zinc-400 hover:text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity" }, React.createElement(Edit3, { size: 16 }))
                                )
                            ),
                            React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400" }, user.email),
                            React.createElement("div", { className: "flex gap-2 mt-3" },
                                React.createElement("span", { className: `px-3 py-1 rounded-full text-xs font-bold ${user.isLocal ? 'bg-orange-100 text-orange-700' : 'bg-emerald-100 text-emerald-700'}` }, user.isLocal ? 'Local Account' : 'Cloud Sync'),
                                user.app_metadata?.provider === 'google' && React.createElement("span", { className: "px-3 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-700 flex items-center gap-1" }, React.createElement(Chrome, { size: 12 }), "Google")
                            )
                        )
                    ),
                    React.createElement("div", { className: "space-y-6" },
                        React.createElement("div", null, React.createElement("label", { className: "text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block" }, "User ID"), React.createElement("div", { className: "p-4 bg-zinc-50 dark:bg-black/50 rounded-xl font-mono text-xs text-zinc-600 dark:text-zinc-400 break-all border border-zinc-200 dark:border-zinc-800" }, user.id)),
                        React.createElement("button", { onClick: onLogout, className: "w-full py-4 bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900/20 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/20 transition-colors flex items-center justify-center gap-2" }, React.createElement(LogOut, { size: 18 }), "Sign Out")
                    )
                )
            );
        };

        // --- DASHBOARD VIEW ---
        const DashboardView = ({ onNavigate, dashboardData = {}, onUpdateDashboard, meals = [], fitnessData = {}, goalsData = {}, dumps = [], books = [] }) => {
            const dailyFocus = dashboardData?.focus || "";
            const positiveNote = dashboardData?.positiveNote || "";
            const dailyRules = dashboardData?.dailyRules || { p: false, j: false, l: false, r: false, t: false };
            const pswtrData = [ { key: 'p', letter: 'P', label: 'Pray' }, { key: 'j', letter: 'J', label: 'Job' }, { key: 'l', letter: 'L', label: 'Learn' }, { key: 'r', letter: 'R', label: 'Read' }, { key: 't', letter: 'T', label: 'Train' } ];
            const toggleRule = (key) => { const newRules = { ...dailyRules, [key]: !dailyRules[key] }; onUpdateDashboard({ ...dashboardData, dailyRules: newRules }); };
            const currentBook = books.find(b => b.status === 'Reading');
            const todayName = new Date().toLocaleDateString('en-US', { weekday: 'long' });
            const todaysBreakfast = meals.find(m => m.day === todayName && m.type === 'Breakfast')?.text || "No breakfast planned";
            const todaysWorkout = fitnessData[fitnessData.gym ? 'gym' : 'gym']?.[0] || null;

            return React.createElement("div", { className: "p-4 space-y-6 pb-24 max-w-7xl mx-auto" },
                React.createElement("div", { className: "flex justify-between items-end mb-4" }, React.createElement("h2", { className: "text-3xl font-bold tracking-tight text-zinc-900 dark:text-white" }, "Command Center"), React.createElement(TimeWidget)),
                React.createElement(Card, { className: "relative overflow-hidden rounded-3xl p-8 border border-indigo-500/30 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-black" }, React.createElement("div", { className: "relative z-10" }, React.createElement("div", { className: "flex items-center gap-2 mb-4 text-indigo-500 dark:text-indigo-300 text-xs font-bold uppercase tracking-widest" }, React.createElement(Target, { size: 14 }), "Primary Directive"), React.createElement("input", { value: dailyFocus, onChange: (e) => onUpdateDashboard({ ...dashboardData, focus: e.target.value }), placeholder: "Win the day by...", className: "w-full bg-transparent border-b-2 border-zinc-300 dark:border-zinc-700/50 text-3xl md:text-5xl font-bold focus:outline-none py-2 text-zinc-900 dark:text-white placeholder:text-zinc-400 dark:placeholder:text-zinc-700 focus:border-indigo-500 transition-all" }))),
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" },
                     React.createElement(Card, { title: "2026 Vision", className: "lg:col-span-2 border-purple-500/20 dark:border-purple-500/20", action: React.createElement("button", { onClick: () => onNavigate('goals2026'), className: "text-zinc-400 hover:text-purple-500 dark:hover:text-purple-400" }, React.createElement(Flag, { size: 16 })) }, React.createElement("p", { className: "text-lg font-medium text-zinc-800 dark:text-zinc-200 italic leading-relaxed" }, goalsData.mission ? `"${goalsData.mission}"` : "Define your mission in the 2026 Plan tab.")),
                     React.createElement(Card, { title: "Daily Rules (PJLRT)", className: "lg:col-span-2" }, React.createElement("div", { className: "grid grid-cols-5 gap-2" }, pswtrData.map(item => React.createElement("button", { key: item.key, onClick: () => toggleRule(item.key), className: `flex flex-col items-center justify-center p-2 rounded-lg transition-all ${dailyRules[item.key] ? 'bg-indigo-50 dark:bg-indigo-600/20 border border-indigo-200 dark:border-indigo-500/50' : 'bg-zinc-50 dark:bg-zinc-800/50 border border-transparent hover:bg-zinc-100 dark:hover:bg-zinc-800'}` }, React.createElement("span", { className: `text-lg font-bold ${dailyRules[item.key] ? 'text-indigo-600 dark:text-indigo-400' : 'text-zinc-400 dark:text-zinc-500'}` }, item.letter), React.createElement("span", { className: "text-[8px] uppercase tracking-wider text-zinc-400 dark:text-zinc-500" }, item.label))))),
                     React.createElement(Card, { title: "Latest Thought", className: "lg:col-span-1", action: React.createElement("button", { onClick: () => onNavigate('braindump'), className: "text-zinc-400 hover:text-zinc-900 dark:hover:text-white" }, React.createElement(FileText, { size: 16 })) }, dumps.length > 0 ? React.createElement("p", { className: "text-sm text-zinc-600 dark:text-zinc-400 line-clamp-3" }, dumps[dumps.length - 1].text) : React.createElement("p", { className: "text-zinc-400 text-sm italic" }, "Mind clear.")),
                     React.createElement(Card, { title: "Now Reading", className: "lg:col-span-1", action: React.createElement("button", { onClick: () => onNavigate('library'), className: "text-zinc-400 hover:text-zinc-900 dark:hover:text-white" }, React.createElement(Book, { size: 16 })) }, currentBook ? React.createElement("div", null, React.createElement("h4", { className: "font-bold text-zinc-900 dark:text-white truncate leading-tight" }, currentBook.title), React.createElement("p", { className: "text-xs text-zinc-500 mt-1" }, currentBook.author)) : React.createElement("div", { className: "text-zinc-400 text-sm italic" }, "No book active.")),
                     React.createElement(Card, { title: "Today's Fuel", className: "lg:col-span-1", action: React.createElement("button", { onClick: () => onNavigate('food'), className: "text-zinc-400 hover:text-zinc-900 dark:hover:text-white" }, React.createElement(Utensils, { size: 16 })) }, React.createElement("div", { className: "flex flex-col gap-1" }, React.createElement("span", { className: "text-[10px] uppercase font-bold text-zinc-500" }, "Breakfast"), React.createElement("p", { className: "text-sm text-zinc-700 dark:text-zinc-300 whitespace-pre-wrap leading-snug" }, todaysBreakfast))),
                     React.createElement(Card, { title: "Daily Movement", className: "lg:col-span-1", action: React.createElement("button", { onClick: () => onNavigate('fitness'), className: "text-zinc-400 hover:text-zinc-900 dark:hover:text-white" }, React.createElement(Dumbbell, { size: 16 })) }, todaysWorkout ? React.createElement("div", { className: "flex items-center gap-4" }, React.createElement("div", { className: "p-3 bg-zinc-100 dark:bg-zinc-800 rounded-xl text-indigo-500 dark:text-indigo-400" }, React.createElement(Activity, { size: 24 })), React.createElement("div", null, React.createElement("h4", { className: "font-bold text-zinc-900 dark:text-white" }, todaysWorkout.title), React.createElement("p", { className: "text-xs text-zinc-500" }, `Finisher: ${todaysWorkout.finisher}`))) : React.createElement("p", { className: "text-zinc-400" }, "Rest Day / No Plan")),
                     React.createElement(Card, { title: "Positive Note", className: "lg:col-span-4 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/10 dark:to-teal-900/10 border-emerald-500/20" }, React.createElement("textarea", { value: positiveNote, onChange: (e) => onUpdateDashboard({ ...dashboardData, positiveNote: e.target.value }), className: "w-full h-16 bg-transparent text-emerald-800 dark:text-emerald-100/90 text-lg font-hand resize-none focus:outline-none placeholder:text-emerald-500/30 leading-relaxed", placeholder: "Write something kind to yourself..." }))
                )
            );
        };

        const SettingsView = ({ onClose, onSave }) => {
            const [url, setUrl] = useState(localStorage.getItem('lifeos_sb_url') || DEFAULT_SB_URL);
            const [key, setKey] = useState(localStorage.getItem('lifeos_sb_key') || "");
            const handleSave = () => { localStorage.setItem('lifeos_sb_url', url.trim()); localStorage.setItem('lifeos_sb_key', key.trim()); onSave(); };
            return React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4" }, React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl w-full max-w-2xl p-6" }, React.createElement("h2", { className: "text-xl font-bold mb-4 text-zinc-900 dark:text-white" }, "Cloud Sync Setup"), React.createElement("input", { value: url, onChange: e => setUrl(e.target.value), placeholder: "Supabase URL", className: "w-full mb-4 p-3 rounded-lg bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white" }), React.createElement("input", { value: key, onChange: e => setKey(e.target.value), type: "password", placeholder: "Anon Key", className: "w-full mb-4 p-3 rounded-lg bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white" }), React.createElement("div", { className: "flex justify-end gap-3" }, React.createElement("button", { onClose, className: "px-4 py-2 text-zinc-500" }, "Cancel"), React.createElement("button", { onClick: handleSave, className: "px-6 py-2 bg-indigo-600 text-white rounded-lg" }, "Save"))));
        };
        
        const LibraryView = ({ books, categories = [], onAddBook, onDeleteBook, onUpdateBook, onAddCategory, onDeleteCategory, onRenameCategory }) => {
             const [newBook, setNewBook] = useState({ title: "", author: "", status: "To Read", category: "General" });
             const [showAdd, setShowAdd] = useState(false);
             const [editingBook, setEditingBook] = useState(null);
             const [showManageModal, setShowManageModal] = useState(false);
             const [editingCategory, setEditingCategory] = useState(null);
             const [newCatInput, setNewCatInput] = useState("");
             
             const statusColors = { 
                 "Reading": "bg-indigo-100 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-300", 
                 "Completed": "bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-300", 
                 "To Read": "bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400" 
             };

             const handleAdd = () => { 
                 if(newBook.title) { 
                     onAddBook(newBook); 
                     setNewBook({ title: "", author: "", status: "To Read", category: "General" }); 
                     setShowAdd(false); 
                 } 
             };
             const handleSaveEdit = () => { if(editingBook && editingBook.title) { onUpdateBook(editingBook); setEditingBook(null); } };

             const startEditing = (cat) => setEditingCategory({ original: cat, current: cat });
             const saveCategory = () => { if(editingCategory && editingCategory.current.trim()) { onRenameCategory(editingCategory.original, editingCategory.current.trim()); setEditingCategory(null); }};

             // Use passed categories or default if empty
             const displayCategories = categories.length > 0 ? categories : ['General', 'Fiction', 'Non-Fiction', 'Self-Help', 'Technical'];

             return React.createElement("div", { className: "p-4 md:p-8 pb-24 h-full flex flex-col max-w-7xl mx-auto" }, 
                React.createElement("div", { className: "flex justify-between items-center mb-6" }, 
                    React.createElement("div", null,
                        React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white" }, "Library"),
                        React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-sm mt-1" }, "Your personal collection.")
                    ),
                    React.createElement("div", { className: "flex gap-2" },
                        React.createElement("button", { onClick: () => setShowManageModal(true), className: "px-4 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-xl font-bold transition-all text-sm" }, "Manage"),
                        React.createElement("button", { onClick: () => setShowAdd(!showAdd), className: "flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-all shadow-glow-sm" }, React.createElement(Plus, { size: 18 }), "Add")
                    )
                ),
                
                showAdd && React.createElement("div", { className: "mb-8 p-6 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl animate-in fade-in slide-in-from-top-4 shadow-xl" }, 
                    React.createElement("h3", { className: "text-lg font-bold text-zinc-900 dark:text-white mb-4" }, "Add New Book"),
                    React.createElement("div", { className: "space-y-4" },
                        React.createElement("input", { value: newBook.title, onChange: e=>setNewBook({...newBook, title:e.target.value}), placeholder: "Book Title", className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500 transition-colors" }), 
                        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4" },
                            React.createElement("input", { value: newBook.author, onChange: e=>setNewBook({...newBook, author:e.target.value}), placeholder: "Author", className: "p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500 transition-colors" }), 
                            React.createElement("select", { value: newBook.category, onChange: e=>setNewBook({...newBook, category:e.target.value}), className: "p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500 transition-colors" },
                                displayCategories.map(c => React.createElement("option", { key: c, value: c }, c))
                            ),
                            React.createElement("select", { value: newBook.status, onChange: e=>setNewBook({...newBook, status:e.target.value}), className: "p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500 transition-colors" },
                                ['Reading', 'To Read', 'Completed'].map(s => React.createElement("option", { key: s, value: s }, s))
                            )
                        ),
                        React.createElement("button", { onClick: handleAdd, className: "w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-500 transition-colors" }, "Add to Library")
                    )
                ), 

                React.createElement("div", { className: "space-y-10 overflow-y-auto pb-4" }, 
                    displayCategories.map(category => {
                        const categoryBooks = books.filter(b => (b.category || 'General') === category);
                        if (categoryBooks.length === 0) return null;

                        return React.createElement("div", { key: category, className: "space-y-4" },
                            React.createElement("h3", { className: "text-lg font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest pl-1 border-l-4 border-indigo-500 ml-1" }, category),
                            React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" },
                                categoryBooks.map(book => (
                                    React.createElement("div", { key: book.id, onClick: () => setEditingBook(book), className: "cursor-pointer p-5 bg-white dark:bg-zinc-900/40 border border-zinc-200 dark:border-zinc-800 rounded-xl hover:border-indigo-500/30 transition-all hover:shadow-md flex flex-col gap-3 group relative" }, 
                                        React.createElement("div", { className: "flex justify-between items-start" },
                                            React.createElement("div", { className: `p-2 rounded-lg ${statusColors[book.status] || statusColors["To Read"]}` }, React.createElement(Book, { size: 20 })),
                                            React.createElement("button", { onClick: (e) => { e.stopPropagation(); onDeleteBook(book.id); }, className: "text-zinc-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" }, React.createElement(Trash2, { size: 16 }))
                                        ),
                                        React.createElement("div", null,
                                            React.createElement("h3", { className: "font-bold text-zinc-900 dark:text-white line-clamp-2" }, book.title),
                                            React.createElement("p", { className: "text-sm text-zinc-500" }, book.author)
                                        ),
                                        React.createElement("span", { className: `self-start text-[10px] px-2 py-1 rounded-full font-bold uppercase tracking-wider ${statusColors[book.status]}` }, book.status)
                                    )
                                ))
                            )
                        );
                    })
                ),

                showManageModal && React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl w-full max-w-md p-6 relative shadow-xl flex flex-col max-h-[80vh]" },
                        React.createElement("button", { onClick: () => { setShowManageModal(false); setEditingCategory(null); }, className: "absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 dark:hover:text-white" }, React.createElement(X, { size: 20 })),
                        React.createElement("h3", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-6" }, "Manage Categories"),
                        React.createElement("div", { className: "flex gap-2 mb-6" },
                            React.createElement("input", { value: newCatInput, onChange: (e) => setNewCatInput(e.target.value), onKeyDown: (e) => e.key === 'Enter' && newCatInput.trim() && (onAddCategory(newCatInput.trim()), setNewCatInput("")), placeholder: "New Category Name...", className: "flex-1 p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-sm focus:outline-none focus:border-indigo-500 text-zinc-900 dark:text-white" }),
                            React.createElement("button", { onClick: () => { if(newCatInput.trim()) { onAddCategory(newCatInput.trim()); setNewCatInput(""); } }, className: "p-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors shadow-glow-sm" }, React.createElement(Plus, { size: 18 }))
                        ),
                        React.createElement("div", { className: "space-y-3 overflow-y-auto flex-1 pr-2" },
                            categories.map(cat => React.createElement("div", { key: cat, className: "flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-800" },
                                editingCategory?.original === cat ?
                                React.createElement("div", { className: "flex gap-2 flex-1" },
                                    React.createElement("input", { value: editingCategory.current, onChange: e => setEditingCategory({...editingCategory, current: e.target.value}), className: "flex-1 bg-white dark:bg-zinc-900 px-2 py-1 rounded border border-indigo-500 outline-none text-sm text-zinc-900 dark:text-white", autoFocus: true }),
                                    React.createElement("button", { onClick: saveCategory, className: "p-1.5 bg-indigo-100 text-indigo-600 rounded hover:bg-indigo-200" }, React.createElement(Check, { size: 16 })),
                                    React.createElement("button", { onClick: () => setEditingCategory(null), className: "p-1.5 bg-zinc-200 text-zinc-600 rounded hover:bg-zinc-300" }, React.createElement(X, { size: 16 }))
                                ) :
                                React.createElement(React.Fragment, null,
                                    React.createElement("span", { className: "font-medium text-sm text-zinc-700 dark:text-zinc-300" }, cat),
                                    React.createElement("div", { className: "flex gap-1" },
                                        cat !== "General" && React.createElement("button", { onClick: () => startEditing(cat), className: "p-2 text-zinc-400 hover:text-indigo-500 transition-colors" }, React.createElement(Edit3, { size: 16 })),
                                        cat !== "General" && React.createElement("button", { onClick: (e) => { e.stopPropagation(); onDeleteCategory(cat); }, className: "p-2 text-zinc-400 hover:text-red-500 transition-colors" }, React.createElement(Trash2, { size: 16 })),
                                        cat === "General" && React.createElement("span", { className: "text-xs text-zinc-400 italic px-2" }, "Default")
                                    )
                                )
                            ))
                        )
                    )
                ),

                editingBook && React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl w-full max-w-md p-6 relative shadow-xl" },
                        React.createElement("button", { onClick: () => setEditingBook(null), className: "absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 dark:hover:text-white" }, React.createElement(X, { size: 20 })),
                        React.createElement("h3", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-6" }, "Edit Book"),
                        React.createElement("div", { className: "space-y-4" },
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-1 block" }, "Title"),
                                React.createElement("input", { value: editingBook.title, onChange: e => setEditingBook({...editingBook, title: e.target.value}), className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500" })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-1 block" }, "Author"),
                                React.createElement("input", { value: editingBook.author, onChange: e => setEditingBook({...editingBook, author: e.target.value}), className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500" })
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-1 block" }, "Category"),
                                React.createElement("select", { value: editingBook.category || "General", onChange: e => setEditingBook({...editingBook, category: e.target.value}), className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500" },
                                    displayCategories.map(c => React.createElement("option", { key: c, value: c }, c))
                                )
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-1 block" }, "Status"),
                                React.createElement("select", { value: editingBook.status, onChange: e => setEditingBook({...editingBook, status: e.target.value}), className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500" },
                                    ['Reading', 'To Read', 'Completed'].map(s => React.createElement("option", { key: s, value: s }, s))
                                )
                            ),
                            React.createElement("button", { onClick: handleSaveEdit, className: "w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl mt-2 shadow-glow-sm" }, "Save Changes")
                        )
                    )
                )
            );
        };

        const FoodView = ({ meals, onUpdateMeal, onAIGenerate }) => {
            const [isGenerating, setIsGenerating] = useState(false);
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const mealTypes = ['Breakfast', 'Lunch', 'Dinner', 'Snack'];
            const getMeal = (d, t) => { const m = meals.find(item => item.day === d && item.type === t); return m ? m.text : ""; };

            const handleAIGenerate = async () => {
                setIsGenerating(true);
                try {
                    await onAIGenerate();
                } catch(e) {
                    alert("Failed to generate plan. Please ensure API Key is configured or try again later.");
                    console.error(e);
                } finally {
                    setIsGenerating(false);
                }
            };

            return React.createElement("div", { className: "p-4 pb-24 max-w-7xl mx-auto" }, 
                React.createElement("div", { className: "flex justify-between items-center mb-6" }, 
                    React.createElement("div", null, 
                        React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white" }, "Weekly Nutrition"), 
                        React.createElement("div", { className: "text-zinc-500 dark:text-zinc-400 text-sm" }, "Plan your fuel.")
                    ), 
                    React.createElement("button", { 
                        onClick: handleAIGenerate, 
                        disabled: isGenerating,
                        className: `p-2 px-4 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 flex items-center gap-2 text-sm font-bold shadow-glow-sm transition-all ${isGenerating ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105'}` 
                    }, isGenerating ? React.createElement(Loader2, { size: 16, className: "animate-spin" }) : React.createElement(Wand2, { size: 16 }), isGenerating ? "Generating..." : "AI Generate Plan")
                ), 
                isGenerating && React.createElement("div", { className: "mb-8 p-8 rounded-2xl border-2 border-dashed border-indigo-500/30 bg-indigo-500/5 flex flex-col items-center justify-center animate-pulse" },
                    React.createElement(Sparkles, { className: "text-indigo-500 mb-4 animate-bounce", size: 32 }),
                    React.createElement("p", { className: "text-indigo-600 dark:text-indigo-400 font-bold" }, "Gemini is crafting your personalized nutrition plan..."),
                    React.createElement("p", { className: "text-xs text-zinc-500 mt-2" }, "Analyzing your goals and mission for optimal performance.")
                ),
                React.createElement("div", { className: "space-y-8" }, days.map(day => 
                    React.createElement("div", { key: day, className: "bg-white/50 dark:bg-zinc-900/30 border border-zinc-200 dark:border-zinc-800 rounded-2xl overflow-hidden shadow-sm dark:shadow-none" }, 
                        React.createElement("div", { className: "bg-zinc-100 dark:bg-zinc-900/80 p-3 border-b border-zinc-200 dark:border-zinc-800 flex items-center gap-2" }, 
                            React.createElement(CalendarDays, { size: 16, className: "text-indigo-500" }), 
                            React.createElement("h3", { className: "font-bold text-zinc-900 dark:text-white" }, day)
                        ), 
                        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 divide-y md:divide-y-0 md:divide-x divide-zinc-200 dark:divide-zinc-800/50" }, mealTypes.map(type => 
                            React.createElement("div", { key: type, className: "p-4 hover:bg-zinc-50 dark:hover:bg-zinc-900/50 transition-colors" }, 
                                React.createElement("div", { className: "text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-wider mb-2" }, type), 
                                React.createElement("textarea", { 
                                    value: getMeal(day, type), 
                                    onChange: (e) => onUpdateMeal(day, type, e.target.value), 
                                    className: "w-full bg-transparent text-zinc-800 dark:text-zinc-200 text-sm resize-none focus:outline-none placeholder:text-zinc-400 dark:placeholder:text-zinc-700 min-h-[60px]", 
                                    placeholder: "-", 
                                    rows: 3 
                                })
                            )
                        ))
                    )
                ))
            );
        };

        const FitnessView = ({ fitnessData, onUpdateFitness, onAIGenerate }) => {
            const [planType, setPlanType] = useState('gym');
            const plan = fitnessData[planType] || [];
            const gymInfo = fitnessData.gymInfo || { pin: "", notes: "" };
            const FITNESS_ICONS = { "Flame": Flame, "Activity": Activity, "Dumbbell": Dumbbell, "Zap": Zap, "Heart": Heart };
            const updateDay = (dayIndex, field, value) => { const newPlan = [...plan]; newPlan[dayIndex] = { ...newPlan[dayIndex], [field]: value }; onUpdateFitness(planType, newPlan); };
            const updateExercise = (dayIndex, exIndex, field, value) => { const newPlan = [...plan]; const day = { ...newPlan[dayIndex] }; const exercises = [...day.exercises]; exercises[exIndex] = { ...exercises[exIndex], [field]: value }; day.exercises = exercises; newPlan[dayIndex] = day; onUpdateFitness(planType, newPlan); };
            const addExercise = (dayIndex) => { const newPlan = [...plan]; const day = { ...newPlan[dayIndex] }; const exercises = [...day.exercises, { name: "", sets: "", reps: "" }]; day.exercises = exercises; newPlan[dayIndex] = day; onUpdateFitness(planType, newPlan); };
            const addWorkoutDay = () => { const newPlan = [...plan, { id: generateUUID(), title: "New Workout Day", icon: "Dumbbell", color: "text-zinc-500", warmup: [], exercises: [], finisher: "" }]; onUpdateFitness(planType, newPlan); };
            const deleteWorkoutDay = (index) => { if(confirm("Delete this workout day?")) { const newPlan = plan.filter((_, i) => i !== index); onUpdateFitness(planType, newPlan); } };
            const updateGymInfo = (field, value) => { const newInfo = { ...gymInfo, [field]: value }; onUpdateFitness('gymInfo', newInfo); };
            return React.createElement("div", { className: "p-4 pb-24 max-w-6xl mx-auto" }, React.createElement("div", { className: "flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6" }, React.createElement("div", null, React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white" }, "Fitness Plan")), React.createElement("div", { className: "flex gap-2" }, React.createElement("div", { className: "flex gap-2 p-1 bg-zinc-100 dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800" }, React.createElement("button", { onClick: () => setPlanType('gym'), className: `px-4 py-1.5 text-sm rounded-md transition-all ${planType === 'gym' ? 'bg-white dark:bg-indigo-600 text-indigo-600 dark:text-white shadow-sm' : 'text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300'}` }, "Gym"), React.createElement("button", { onClick: () => setPlanType('home'), className: `px-4 py-1.5 text-sm rounded-md transition-all ${planType === 'home' ? 'bg-white dark:bg-indigo-600 text-indigo-600 dark:text-white shadow-sm' : 'text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300'}` }, "Home")))), React.createElement("div", { className: "mb-8 bg-gradient-to-r from-zinc-900 to-zinc-800 text-white rounded-2xl p-6 shadow-lg relative overflow-hidden" }, React.createElement("div", { className: "absolute top-0 right-0 p-4 opacity-10" }, React.createElement(Dumbbell, { size: 120 })), React.createElement("div", { className: "relative z-10 grid grid-cols-1 md:grid-cols-2 gap-6" }, React.createElement("div", null, React.createElement("div", { className: "flex items-center gap-2 mb-2 text-zinc-400 text-xs font-bold uppercase tracking-widest" }, React.createElement(Lock, { size: 14 }), "Gym Access Pin"), React.createElement("input", { value: gymInfo.pin, onChange: (e) => updateGymInfo('pin', e.target.value), placeholder: "0000", className: "bg-transparent text-4xl font-mono font-bold text-white focus:outline-none placeholder:text-zinc-700 w-full" })), React.createElement("div", null, React.createElement("div", { className: "flex items-center gap-2 mb-2 text-zinc-400 text-xs font-bold uppercase tracking-widest" }, React.createElement(Wifi, { size: 14 }), "Gym Wifi / Notes"), React.createElement("textarea", { value: gymInfo.notes, onChange: (e) => updateGymInfo('notes', e.target.value), placeholder: "Wifi Password: ...", className: "bg-transparent text-sm text-zinc-200 focus:outline-none placeholder:text-zinc-700 w-full resize-none h-12" })))), React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4" }, plan.map((s, dIdx) => { const Icon = FITNESS_ICONS[s.icon] || Dumbbell; return React.createElement("div", { key: s.id, className: "p-6 border border-zinc-200 dark:border-zinc-800 rounded-2xl bg-white/50 dark:bg-zinc-900/30 flex flex-col gap-4 shadow-sm dark:shadow-none group relative" }, React.createElement("button", { onClick: () => deleteWorkoutDay(dIdx), className: "absolute top-4 right-4 text-zinc-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" }, React.createElement(Trash, { size: 16 })), React.createElement("div", { className: "flex items-center gap-3 border-b border-zinc-200 dark:border-zinc-800 pb-3" }, React.createElement(Icon, { className: s.color, size: 24 }), React.createElement("input", { value: s.title, onChange: (e) => updateDay(dIdx, 'title', e.target.value), className: "font-bold text-lg text-zinc-900 dark:text-white bg-transparent focus:outline-none w-full border-b border-transparent focus:border-zinc-300 dark:focus:border-zinc-700 transition-colors", placeholder: "Day Title" })), React.createElement("div", { className: "space-y-3" }, s.exercises.map((e, eIdx) => React.createElement("div", { key: eIdx, className: "flex items-center gap-2 text-sm" }, React.createElement("input", { value: e.name, onChange: ex => updateExercise(dIdx, eIdx, 'name', ex.target.value), className: "flex-1 bg-transparent text-zinc-700 dark:text-zinc-300 focus:text-zinc-900 dark:focus:text-white focus:outline-none placeholder:text-zinc-400 dark:placeholder:text-zinc-700", placeholder: "Exercise Name" }), React.createElement("div", { className: "flex gap-1" }, React.createElement("input", { value: e.sets, onChange: ex => updateExercise(dIdx, eIdx, 'sets', ex.target.value), className: "w-8 text-center bg-zinc-100 dark:bg-zinc-950/50 rounded text-zinc-500 font-mono focus:text-zinc-900 dark:focus:text-white focus:outline-none", placeholder: "S" }), React.createElement("span", { className: "text-zinc-400 dark:text-zinc-700" }, "x"), React.createElement("input", { value: e.reps, onChange: ex => updateExercise(dIdx, eIdx, 'reps', ex.target.value), className: "w-12 text-center bg-zinc-100 dark:bg-zinc-950/50 rounded text-zinc-500 font-mono focus:text-zinc-900 dark:focus:text-white focus:outline-none", placeholder: "Reps" })))), React.createElement("button", { onClick: () => addExercise(dIdx), className: "w-full py-2 mt-2 text-xs font-bold text-zinc-400 hover:text-indigo-500 hover:bg-zinc-50 dark:hover:bg-zinc-800/50 rounded-lg dashed-border transition-colors flex items-center justify-center gap-1" }, React.createElement(Plus, { size: 12 }), "Add Exercise")), React.createElement("div", { className: "mt-auto pt-3 border-t border-zinc-200 dark:border-zinc-800/50 flex items-center gap-2" }, React.createElement("span", { className: "text-[10px] font-bold text-red-500 dark:text-red-400 uppercase tracking-wider shrink-0" }, "FINISHER:"), React.createElement("input", { value: s.finisher, onChange: (e) => updateDay(dIdx, 'finisher', e.target.value), className: "bg-transparent text-xs font-bold text-zinc-500 dark:text-zinc-400 focus:text-zinc-900 dark:focus:text-white focus:outline-none w-full uppercase tracking-wide", placeholder: "Add finisher..." }))); }), React.createElement("button", { onClick: addWorkoutDay, className: "p-6 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl flex flex-col items-center justify-center gap-3 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/10 transition-all min-h-[300px]" }, React.createElement(Plus, { size: 32 }), React.createElement("span", { className: "font-bold" }, "Add Workout Day"))));
        };
        const BrainDumpView = ({ dumps, onAddDump, onDeleteDump }) => {
            const [input, setInput] = useState("");
            const getPosition = (index, total) => { if (total === 0) return { x: 50, y: 50 }; const angle = (index / total) * 2 * Math.PI - (Math.PI / 2); const radius = 35; return { x: 50 + radius * Math.cos(angle), y: 50 + radius * Math.sin(angle) }; };
            return React.createElement("div", { className: "h-[85vh] w-full relative overflow-hidden flex flex-col" }, React.createElement("div", { className: "absolute top-4 left-4 z-20 pointer-events-none" }, React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white shadow-white dark:shadow-black drop-shadow-sm" }, "Mind Map"), React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-sm mt-1" }, "Visualize your thoughts.")), React.createElement("div", { className: "flex-1 relative w-full h-full" }, React.createElement("svg", { className: "absolute inset-0 w-full h-full pointer-events-none z-0" }, dumps.map((dump, i) => { const pos = getPosition(i, dumps.length); return React.createElement("line", { key: `line-${dump.id}`, x1: "50%", y1: "50%", x2: `${pos.x}%`, y2: `${pos.y}%`, className: "stroke-indigo-300 dark:stroke-indigo-500/20 stroke-2", strokeDasharray: "5,5" }); })), React.createElement("div", { className: "absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10" }, React.createElement("div", { className: "w-24 h-24 bg-indigo-600 rounded-full flex items-center justify-center shadow-glow animate-brain relative z-20" }, React.createElement(Brain, { size: 48, className: "text-white" })), React.createElement("div", { className: "absolute inset-0 bg-indigo-500 rounded-full animate-ping opacity-20" })), dumps.map((dump, i) => { const pos = getPosition(i, dumps.length); return React.createElement("div", { key: dump.id, style: { left: `${pos.x}%`, top: `${pos.y}%` }, className: "absolute -translate-x-1/2 -translate-y-1/2 w-48 z-20 transition-all duration-500" }, React.createElement("div", { className: "glass-panel p-4 rounded-xl text-xs text-zinc-700 dark:text-zinc-200 border-zinc-200 dark:border-zinc-700/50 bg-white/80 dark:bg-zinc-900/60 hover:border-indigo-500/50 transition-all group relative cursor-default hover:scale-105 hover:z-30 shadow-lg" }, React.createElement("p", { className: "line-clamp-4 text-center leading-relaxed font-medium" }, dump.text), React.createElement("button", { onClick: () => onDeleteDump(dump.id), className: "absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity shadow-sm hover:scale-110" }, React.createElement(Trash, { size: 12 })))); })), React.createElement("div", { className: "absolute bottom-8 left-1/2 -translate-x-1/2 z-30 w-full max-w-xl px-4" }, React.createElement("div", { className: "relative w-full" }, React.createElement("div", { className: "absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full opacity-30 blur" }), React.createElement("input", { value: input, onChange: e => setInput(e.target.value), onKeyDown: e => { if (e.key === 'Enter' && input.trim()) { onAddDump(input); setInput(""); } }, placeholder: "Add a thought node...", className: "relative w-full p-4 pl-6 rounded-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 shadow-xl backdrop-blur-md transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500" }), React.createElement("button", { onClick: () => { if(input.trim()) { onAddDump(input); setInput(""); }}, className: "absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-indigo-600 rounded-full hover:bg-indigo-500 transition-colors shadow-lg z-40" }, React.createElement(Plus, { size: 20, className: "text-white" })))));
        };
        const DeadlinesView = ({ deadlines = [], onAddDeadline, onDeleteDeadline }) => {
            const [newTitle, setNewTitle] = useState("");
            const [newDate, setNewDate] = useState("");
            return React.createElement("div", { className: "p-4 max-w-4xl mx-auto" }, React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white mb-6" }, "Deadlines"), React.createElement("div", { className: "flex gap-3 mb-6 bg-white/50 dark:bg-zinc-900/50 p-4 rounded-xl border border-zinc-200 dark:border-zinc-800" }, React.createElement("input", { value: newTitle, onChange: e => setNewTitle(e.target.value), placeholder: "Deadline Title", className: "flex-1 bg-transparent text-zinc-900 dark:text-white focus:outline-none placeholder:text-zinc-400" }), React.createElement("input", { type: "date", value: newDate, onChange: e => setNewDate(e.target.value), className: "bg-transparent text-zinc-500 dark:text-zinc-400 focus:text-zinc-900 dark:focus:text-white focus:outline-none" }), React.createElement("button", { onClick: () => { if(newTitle && newDate) { onAddDeadline({ title: newTitle, date: newDate }); setNewTitle(""); setNewDate(""); } }, className: "text-indigo-500 hover:text-indigo-600 dark:hover:text-indigo-400 font-bold" }, "Add")), React.createElement("div", { className: "space-y-3" }, deadlines.sort((a,b) => new Date(a.date) - new Date(b.date)).map(d => React.createElement("div", { key: d.id, className: "flex justify-between items-center p-4 bg-white/70 dark:bg-zinc-900/30 border border-zinc-200 dark:border-zinc-800 rounded-xl shadow-sm dark:shadow-none" }, React.createElement("div", null, React.createElement("h4", { className: "font-bold text-zinc-900 dark:text-white" }, d.title), React.createElement("p", { className: "text-xs text-zinc-500" }, new Date(d.date).toLocaleDateString())), React.createElement("button", { onClick: () => onDeleteDeadline(d.id), className: "text-zinc-400 hover:text-red-500" }, React.createElement(Trash, { size: 16 }))))));
        };
        const Goals2026View = ({ goalsData, onUpdateGoals }) => {
            const safeData = { mission: goalsData.mission || "", mainFocus: goalsData.mainFocus || [{id: '1', text: ''}, {id: '2', text: ''}, {id: '3', text: ''}], dos: goalsData.dos || [], donts: goalsData.donts || [], milestones: goalsData.milestones || [], quarters: goalsData.quarters || { q1: [], q2: [], q3: [], q4: [] }, phases: goalsData.phases || { phase1: [], phase2: [], phase3: [] } };
            const updateSection = (path, newData) => { const newGoals = { ...safeData }; if (path.includes('.')) { const [parent, child] = path.split('.'); if (!newGoals[parent]) newGoals[parent] = {}; newGoals[parent][child] = newData; } else newGoals[path] = newData; onUpdateGoals(newGoals); };
            const addItem = (path, text) => { const parts = path.split('.'); let list = parts.length > 1 ? safeData[parts[0]][parts[1]] || [] : safeData[path] || []; updateSection(path, [...list, { id: generateUUID(), text, completed: false }]); };
            const toggleItem = (path, id) => { const parts = path.split('.'); let list = parts.length > 1 ? safeData[parts[0]][parts[1]] : safeData[path]; updateSection(path, list.map(i => i.id === id ? { ...i, completed: !i.completed } : i)); };
            const deleteItem = (path, id) => { const parts = path.split('.'); let list = parts.length > 1 ? safeData[parts[0]][parts[1]] : safeData[path]; updateSection(path, list.filter(i => i.id !== id)); };
            const updateMainFocus = (idx, text) => { const newFocus = [...safeData.mainFocus]; if (!newFocus[idx]) newFocus[idx] = { id: generateUUID(), text: "" }; newFocus[idx].text = text; updateSection('mainFocus', newFocus); };
            return React.createElement("div", { className: "p-4 md:p-8 pb-32 space-y-12 h-full overflow-y-auto max-w-7xl mx-auto" }, React.createElement("div", { className: "text-center space-y-2" }, React.createElement("h2", { className: "text-4xl font-bold text-zinc-900 dark:text-white tracking-tight" }, "2026 Vision Board"), React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400" }, "Design your future. Execute your present.")), React.createElement("div", { className: "relative group" }, React.createElement("div", { className: "absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl blur opacity-10 dark:opacity-20 group-hover:opacity-30 dark:group-hover:opacity-40 transition duration-1000 group-hover:duration-200" }), React.createElement("div", { className: "relative p-8 bg-white dark:bg-zinc-900 ring-1 ring-zinc-200 dark:ring-white/10 rounded-xl leading-none flex items-top justify-start space-x-6 shadow-sm" }, React.createElement(Target, { className: "w-8 h-8 text-indigo-500 dark:text-indigo-400 shrink-0 mt-2" }), React.createElement("div", { className: "space-y-4 w-full" }, React.createElement("h3", { className: "text-lg font-bold text-indigo-900 dark:text-indigo-100" }, "North Star Mission"), React.createElement("textarea", { value: safeData.mission, onChange: (e) => updateSection('mission', e.target.value), className: "w-full bg-transparent text-2xl md:text-3xl font-bold text-zinc-800 dark:text-white leading-tight resize-none focus:outline-none placeholder:text-zinc-300 dark:placeholder:text-zinc-700 h-auto min-h-[120px]", placeholder: "What is your ultimate goal for 2026?" })))), React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6" }, [0, 1, 2].map(i => React.createElement("div", { key: i, className: "relative p-6 bg-white/70 dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-800 hover:border-indigo-500/50 rounded-2xl transition-all group flex flex-col items-center text-center gap-4 hover:-translate-y-1 shadow-sm hover:shadow-md" }, React.createElement("div", { className: "w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-xl font-bold text-zinc-400 dark:text-zinc-500 group-hover:bg-indigo-600 group-hover:text-white transition-colors" }, i + 1), React.createElement("input", { value: safeData.mainFocus[i]?.text || "", onChange: (e) => updateMainFocus(i, e.target.value), className: "bg-transparent text-center font-bold text-xl text-zinc-900 dark:text-white w-full focus:outline-none placeholder:text-zinc-300 dark:placeholder:text-zinc-700", placeholder: "Core Focus" }), React.createElement("div", { className: "h-1 w-12 bg-zinc-200 dark:bg-zinc-800 group-hover:bg-indigo-500 transition-colors rounded-full" })))), React.createElement("div", null, React.createElement("div", { className: "flex items-center gap-3 mb-6" }, React.createElement("div", { className: "p-2 bg-indigo-100 dark:bg-indigo-500/10 rounded-lg text-indigo-600 dark:text-indigo-400" }, React.createElement(CalendarIcon, { size: 20 })), React.createElement("h3", { className: "text-2xl font-bold text-zinc-900 dark:text-white" }, "Quarterly Execution")), React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6" }, ['Q1', 'Q2', 'Q3', 'Q4'].map(q => { const months = { 'Q1': 'Jan - Mar', 'Q2': 'Apr - Jun', 'Q3': 'Jul - Sep', 'Q4': 'Oct - Dec' }[q]; return React.createElement("div", { key: q, className: "bg-white/60 dark:bg-zinc-900/30 border border-zinc-200 dark:border-zinc-800/60 rounded-2xl p-5 hover:bg-white dark:hover:bg-zinc-900/50 transition-colors shadow-sm" }, React.createElement("div", { className: "flex justify-between items-center mb-4" }, React.createElement("span", { className: "text-3xl font-black text-zinc-900 dark:text-zinc-800 select-none" }, q), React.createElement("span", { className: "text-xs font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-black/30 px-2 py-1 rounded" }, months)), React.createElement(EditableList, { items: safeData.quarters[q.toLowerCase()] || [], onAdd: t => addItem(`quarters.${q.toLowerCase()}`, t), onToggle: id => toggleItem(`quarters.${q.toLowerCase()}`, id), onDelete: id => deleteItem(`quarters.${q.toLowerCase()}`, id), placeholder: "Key objective..." })); }))), React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-8" }, React.createElement("div", { className: "bg-emerald-50 dark:bg-emerald-950/10 border border-emerald-200 dark:border-emerald-500/20 rounded-3xl p-6 md:p-8" }, React.createElement("h3", { className: "text-xl font-bold text-emerald-600 dark:text-emerald-400 mb-6 flex items-center gap-2" }, React.createElement(CheckCircle2, { size: 24 }), "Focus habits"), React.createElement(EditableList, { items: safeData.dos || [], onAdd: t => addItem('dos', t), onToggle: id => toggleItem('dos', id), onDelete: id => deleteItem('dos', id), placeholder: "I am someone who..." })), React.createElement("div", { className: "bg-rose-50 dark:bg-rose-950/10 border border-rose-200 dark:border-rose-500/20 rounded-3xl p-6 md:p-8" }, React.createElement("h3", { className: "text-xl font-bold text-rose-600 dark:text-rose-400 mb-6 flex items-center gap-2" }, React.createElement(Ban, { size: 24 }), "Distractions"), React.createElement(EditableList, { items: safeData.donts || [], onAdd: t => addItem('donts', t), onToggle: id => toggleItem('donts', id), onDelete: id => deleteItem('donts', id), placeholder: "I refuse to..." }))), React.createElement("div", { className: "bg-white/70 dark:bg-zinc-900/30 border border-zinc-200 dark:border-zinc-800 rounded-3xl p-6 relative overflow-hidden shadow-sm" }, React.createElement("h3", { className: "text-lg font-bold text-zinc-900 dark:text-white mb-6 flex items-center gap-2 relative z-10" }, React.createElement(Flag, { size: 18, className: "text-yellow-500" }), "Milestone Journey"), React.createElement("div", { className: "relative z-10 pl-2" }, safeData.milestones.length > 0 && React.createElement("div", { className: "absolute left-[19px] top-3 bottom-10 w-0.5 bg-zinc-200 dark:bg-zinc-800" }), safeData.milestones.map((item, idx) => { const isCompleted = item.completed; const isNext = !isCompleted && (idx === 0 || safeData.milestones[idx-1].completed); return React.createElement("div", { key: item.id, className: "relative flex items-start gap-4 mb-6 last:mb-0 group" }, React.createElement("button", { onClick: () => toggleItem('milestones', item.id), className: `relative z-10 w-8 h-8 shrink-0 rounded-full flex items-center justify-center border-2 transition-all duration-300 cursor-pointer ${isCompleted ? 'bg-emerald-500 border-emerald-500 text-white shadow-md' : isNext ? 'bg-indigo-600 border-indigo-400 text-white animate-pulse shadow-md scale-110' : 'bg-zinc-100 dark:bg-zinc-900 border-zinc-300 dark:border-zinc-700 text-zinc-400 dark:text-zinc-600'}` }, isCompleted ? React.createElement(Check, { size: 14, strokeWidth: 3 }) : React.createElement("span", { className: "text-xs font-bold" }, idx + 1)), React.createElement("div", { className: "flex-1 pt-1.5" }, React.createElement("div", { className: "flex justify-between items-start" }, React.createElement("span", { className: `text-sm font-medium transition-colors duration-300 leading-none ${isCompleted ? 'text-zinc-400 dark:text-zinc-500 line-through' : isNext ? 'text-zinc-900 dark:text-white font-bold' : 'text-zinc-400 dark:text-zinc-500'}` }, item.text), React.createElement("button", { onClick: () => deleteItem('milestones', item.id), className: "text-zinc-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity ml-2" }, React.createElement(Trash, { size: 12 }))))); }), React.createElement("div", { className: "relative flex items-center gap-4 mt-4 pt-2" }, React.createElement("div", { className: "w-8 h-8 shrink-0 rounded-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 border-dashed flex items-center justify-center text-zinc-400 dark:text-zinc-500" }, React.createElement(Plus, { size: 14 })), React.createElement("input", { onKeyDown: (e) => { if(e.key === 'Enter' && e.target.value.trim()) { addItem('milestones', e.target.value); e.target.value = ''; } }, placeholder: "Add next step...", className: "bg-transparent text-sm text-zinc-500 dark:text-zinc-400 focus:text-zinc-900 dark:focus:text-white focus:outline-none w-full placeholder:text-zinc-400 dark:placeholder:text-zinc-700" })))));
        };
        const FocusView = ({ timerState, toggleTimer, resetTimer, activeSound, isPlayingSound, toggleSound }) => {
            const format = (s) => `${Math.floor(s / 60).toString().padStart(2,'0')}:${(s % 60).toString().padStart(2,'0')}`;
            const progress = ((timerState.initialTime - timerState.timeLeft) / timerState.initialTime) * 100;
            const radius = 140; const circumference = 2 * Math.PI * radius; const strokeDashoffset = circumference - (progress / 100) * circumference;
            return React.createElement("div", { className: "h-full min-h-[80vh] flex flex-col items-center justify-center relative overflow-hidden" }, React.createElement("div", { className: `absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-indigo-500/10 rounded-full blur-[120px] transition-all duration-1000 ${timerState.isActive ? 'scale-110 opacity-100' : 'scale-90 opacity-40'}` }), React.createElement("div", { className: "relative z-10 flex flex-col items-center w-full max-w-2xl" }, React.createElement("div", { className: "flex gap-1 mb-10 bg-white/50 dark:bg-black/40 p-1.5 rounded-full border border-zinc-200 dark:border-white/5 backdrop-blur-md shadow-xl" }, [{ m: 25, l: "Focus" }, { m: 5, l: "Short Break" }, { m: 15, l: "Long Break" }, { m: 60, l: "Deep Work" }].map(p => React.createElement("button", { key: p.m, onClick: () => resetTimer(p.m * 60), className: `px-5 py-2 rounded-full text-xs font-bold transition-all duration-300 ${timerState.initialTime === p.m * 60 ? 'bg-indigo-600 dark:bg-white text-white dark:text-black shadow-md' : 'text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-white/10'}` }, p.l))), React.createElement("div", { className: "relative mb-12 group" }, React.createElement("svg", { className: "w-[340px] h-[340px] transform -rotate-90 drop-shadow-2xl" }, React.createElement("circle", { cx: "170", cy: "170", r: radius, stroke: "#e4e4e7", strokeWidth: "3", fill: "transparent", className: "dark:stroke-zinc-800" }), React.createElement("circle", { cx: "170", cy: "170", r: radius, stroke: "currentColor", strokeWidth: "3", fill: "transparent", strokeDasharray: circumference, strokeDashoffset: strokeDashoffset, className: `transition-all duration-1000 ease-linear ${timerState.isActive ? 'text-indigo-500 shadow-[0_0_20px_currentColor]' : 'text-zinc-400 dark:text-zinc-600'}`, strokeLinecap: "round" })), React.createElement("div", { className: "absolute inset-0 flex flex-col items-center justify-center" }, React.createElement("div", { className: "text-7xl md:text-8xl font-mono font-bold tracking-tighter text-zinc-900 dark:text-white tabular-nums drop-shadow-lg" }, format(timerState.timeLeft)), React.createElement("div", { className: `mt-6 flex gap-4 transition-all duration-300 ${timerState.isActive ? 'opacity-0 group-hover:opacity-100 translate-y-2 group-hover:translate-y-0' : 'opacity-100'}` }, React.createElement("button", { onClick: toggleTimer, className: "w-14 h-14 rounded-full flex items-center justify-center bg-zinc-900 dark:bg-white text-white dark:text-black hover:scale-110 transition-transform shadow-lg" }, timerState.isActive ? React.createElement(Pause, { size: 24, fill: "currentColor" }) : React.createElement(Play, { size: 24, fill: "currentColor", className: "ml-1" })), React.createElement("button", { onClick: () => resetTimer(), className: "w-14 h-14 rounded-full flex items-center justify-center bg-zinc-100 dark:bg-zinc-900 text-zinc-500 dark:text-zinc-400 border border-zinc-200 dark:border-zinc-800 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all hover:scale-105" }, React.createElement(RotateCcw, { size: 20 }))))), React.createElement("div", { className: "bg-white/50 dark:bg-black/30 backdrop-blur-xl border border-zinc-200 dark:border-white/5 rounded-2xl p-2 px-6 flex items-center gap-8 shadow-2xl" }, React.createElement("div", { className: "text-[10px] font-bold text-zinc-500 dark:text-zinc-600 uppercase tracking-widest mr-2" }, "Soundscape"), FOCUS_SOUNDS.map(s => { const isActive = activeSound === s.id && isPlayingSound; return React.createElement("button", { key: s.id, onClick: () => toggleSound(s), className: `flex items-center gap-3 py-2 px-3 rounded-lg transition-all ${isActive ? 'text-indigo-600 dark:text-indigo-400 bg-indigo-100 dark:bg-indigo-500/10' : 'text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-300'}` }, React.createElement(s.icon, { size: 20, className: isActive ? "animate-pulse" : "" }), React.createElement("span", { className: "text-xs font-bold" }, s.label), isActive && React.createElement("div", { className: "w-1.5 h-1.5 rounded-full bg-indigo-500 ml-1 shadow-[0_0_5px_currentColor]" })); }))));
        };
        const ToolsView = ({ tools, categories, onAddTool, onAddCategory, onDeleteCategory, onRenameCategory, onDeleteTool, onUpdateTool }) => {
            const [showAddModal, setShowAddModal] = useState(false);
            const [showManageModal, setShowManageModal] = useState(false);
            const [editingCategory, setEditingCategory] = useState(null);
            const [editingTool, setEditingTool] = useState(null); // State for editing tool
            const [newTool, setNewTool] = useState({ name: "", url: "", category: "General", icon: "Link" });
            const [isCustomCategory, setIsCustomCategory] = useState(false);
            const [customCategoryName, setCustomCategoryName] = useState("");
            const [newCatInput, setNewCatInput] = useState("");

            const handleAdd = () => {
                if (newTool.name && newTool.url) {
                    const finalCategory = isCustomCategory ? customCategoryName : newTool.category;
                    if (isCustomCategory && customCategoryName) onAddCategory(customCategoryName);
                    onAddTool({ ...newTool, category: finalCategory });
                    setShowAddModal(false);
                    setNewTool({ name: "", url: "", category: "General", icon: "Link" });
                    setCustomCategoryName("");
                    setIsCustomCategory(false);
                }
            };

            const handleUpdate = () => {
                if(editingTool && editingTool.name && editingTool.url) {
                    onUpdateTool(editingTool);
                    setEditingTool(null);
                }
            };

            const startEditing = (cat) => setEditingCategory({ original: cat, current: cat });
            const saveCategory = () => { if(editingCategory && editingCategory.current.trim()) { onRenameCategory(editingCategory.original, editingCategory.current.trim()); setEditingCategory(null); }};

            return React.createElement("div", { className: "p-6 md:p-10 pb-32 h-full flex flex-col max-w-7xl mx-auto" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white" }, "App Library"),
                        React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-sm mt-1" }, "Your digital toolbelt.")
                    ),
                    React.createElement("div", { className: "flex gap-2" },
                        React.createElement("button", { onClick: () => setShowManageModal(true), className: "px-4 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-xl font-bold transition-all text-sm" }, "Manage"),
                        React.createElement("button", { onClick: () => setShowAddModal(true), className: "flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-all shadow-glow-sm" }, React.createElement(Plus, { size: 18 }), "Add")
                    )
                ),
                React.createElement("div", { className: "grid grid-cols-3 sm:grid-cols-4 gap-4 pb-10" },
                    categories.map(cat => {
                        const catTools = tools.filter(t => t.category === cat);
                        if (catTools.length === 0) return null;
                        return React.createElement("div", { key: cat, className: "break-inside-avoid mb-6" },
                            React.createElement("div", { className: "bg-zinc-100/50 dark:bg-zinc-900/40 border border-zinc-200 dark:border-zinc-800 rounded-[2rem] p-5 flex flex-col backdrop-blur-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-colors h-full" },
                                React.createElement("h3", { className: "text-lg font-bold text-zinc-700 dark:text-zinc-300 mb-4 ml-1 flex items-center gap-2" }, cat, React.createElement("span", { className: "text-[10px] font-bold text-zinc-400 bg-zinc-200 dark:bg-zinc-800 px-2 py-0.5 rounded-full" }, catTools.length)),
                                React.createElement("div", { className: "grid grid-cols-3 gap-x-2 gap-y-4" },
                                    catTools.map(tool => {
                                        const IconComp = ICON_LIB[tool.icon] || Globe;
                                        return React.createElement("div", { key: tool.id, className: "relative group flex flex-col items-center gap-2 h-full" },
                                            // Edit/Delete Controls (Absolute positioned)
                                            React.createElement("div", { className: "absolute -top-2 -right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-20 scale-90" },
                                                 React.createElement("button", { onClick: (e) => {e.stopPropagation(); setEditingTool(tool);}, className: "p-1 bg-white dark:bg-zinc-800 rounded-full shadow-sm text-zinc-400 hover:text-indigo-500 border border-zinc-200 dark:border-zinc-700" }, React.createElement(Edit3, { size: 12 })),
                                                 React.createElement("button", { onClick: (e) => {e.stopPropagation(); onDeleteTool(tool.id);}, className: "p-1 bg-white dark:bg-zinc-800 rounded-full shadow-sm text-zinc-400 hover:text-red-500 border border-zinc-200 dark:border-zinc-700" }, React.createElement(Trash2, { size: 12 }))
                                            ),
                                            React.createElement("a", { href: tool.url, target: "_blank", className: "flex flex-col items-center gap-2 w-full h-full" },
                                                React.createElement("div", { className: "w-14 h-14 rounded-2xl bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 flex items-center justify-center text-zinc-600 dark:text-zinc-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-400 group-hover:scale-105 transition-all shadow-sm group-hover:shadow-md" }, React.createElement(IconComp, { size: 26 })),
                                                React.createElement("span", { className: "text-[10px] font-medium text-zinc-500 dark:text-zinc-400 text-center w-full break-words leading-tight group-hover:text-zinc-900 dark:group-hover:text-white" }, tool.name)
                                            )
                                        );
                                    })
                                )
                            )
                        );
                    })
                ),
                showManageModal && React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl w-full max-w-md p-6 relative shadow-xl flex flex-col max-h-[80vh]" },
                        React.createElement("button", { onClick: () => { setShowManageModal(false); setEditingCategory(null); }, className: "absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 dark:hover:text-white" }, React.createElement(X, { size: 20 })),
                        React.createElement("h3", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-6" }, "Manage Categories"),
                        React.createElement("div", { className: "flex gap-2 mb-6" },
                            React.createElement("input", { value: newCatInput, onChange: (e) => setNewCatInput(e.target.value), onKeyDown: (e) => e.key === 'Enter' && newCatInput.trim() && (onAddCategory(newCatInput.trim()), setNewCatInput("")), placeholder: "New Category Name...", className: "flex-1 p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-sm focus:outline-none focus:border-indigo-500 text-zinc-900 dark:text-white" }),
                            React.createElement("button", { onClick: () => { if(newCatInput.trim()) { onAddCategory(newCatInput.trim()); setNewCatInput(""); } }, className: "p-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 transition-colors shadow-glow-sm" }, React.createElement(Plus, { size: 18 }))
                        ),
                        React.createElement("div", { className: "space-y-3 overflow-y-auto flex-1 pr-2" },
                            categories.map(cat => React.createElement("div", { key: cat, className: "flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-800" },
                                editingCategory?.original === cat ?
                                React.createElement("div", { className: "flex gap-2 flex-1" },
                                    React.createElement("input", { value: editingCategory.current, onChange: e => setEditingCategory({...editingCategory, current: e.target.value}), className: "flex-1 bg-white dark:bg-zinc-900 px-2 py-1 rounded border border-indigo-500 outline-none text-sm text-zinc-900 dark:text-white", autoFocus: true }),
                                    React.createElement("button", { onClick: saveCategory, className: "p-1.5 bg-indigo-100 text-indigo-600 rounded hover:bg-indigo-200" }, React.createElement(Check, { size: 16 })),
                                    React.createElement("button", { onClick: () => setEditingCategory(null), className: "p-1.5 bg-zinc-200 text-zinc-600 rounded hover:bg-zinc-300" }, React.createElement(X, { size: 16 }))
                                ) :
                                React.createElement(React.Fragment, null,
                                    React.createElement("span", { className: "font-medium text-sm text-zinc-700 dark:text-zinc-300" }, cat),
                                    React.createElement("div", { className: "flex gap-1" },
                                        cat !== "General" && React.createElement("button", { onClick: () => startEditing(cat), className: "p-2 text-zinc-400 hover:text-indigo-500 transition-colors" }, React.createElement(Edit3, { size: 16 })),
                                        cat !== "General" && React.createElement("button", { onClick: (e) => { e.stopPropagation(); onDeleteCategory(cat); }, className: "p-2 text-zinc-400 hover:text-red-500 transition-colors" }, React.createElement(Trash2, { size: 16 })),
                                        cat === "General" && React.createElement("span", { className: "text-xs text-zinc-400 italic px-2" }, "Default")
                                    )
                                )
                            ))
                        )
                    )
                ),
                showAddModal && React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl w-full max-w-lg p-6 relative shadow-xl" },
                        React.createElement("button", { onClick: () => setShowAddModal(false), className: "absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 dark:hover:text-white" }, React.createElement(X, { size: 20 })),
                        React.createElement("h3", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-6" }, "Add New Tool"),
                        React.createElement("div", { className: "space-y-4" },
                            React.createElement("input", { value: newTool.name, onChange: e => setNewTool({...newTool, name: e.target.value}), placeholder: "Tool Name", className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" }),
                            React.createElement("input", { value: newTool.url, onChange: e => setNewTool({...newTool, url: e.target.value}), placeholder: "URL (https://...)", className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" }),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-1 block" }, "Category"),
                                isCustomCategory ?
                                React.createElement("div", { className: "flex gap-2" },
                                    React.createElement("input", { value: customCategoryName, onChange: e => setCustomCategoryName(e.target.value), placeholder: "New Category Name", className: "flex-1 p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" }),
                                    React.createElement("button", { onClick: () => setIsCustomCategory(false), className: "p-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 rounded-xl hover:text-zinc-900 dark:hover:text-white" }, React.createElement(X, { size: 18 }))
                                ) :
                                React.createElement("select", { value: newTool.category, onChange: e => { if (e.target.value === 'NEW') setIsCustomCategory(true); else setNewTool({...newTool, category: e.target.value}); }, className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" },
                                    categories.map(c => React.createElement("option", { key: c, value: c }, c)),
                                    React.createElement("option", { value: "NEW", className: "text-indigo-500 font-bold" }, "+ Create New Category")
                                )
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-2 block" }, "Select Icon"),
                                React.createElement("div", { className: "grid grid-cols-6 gap-2 max-h-32 overflow-y-auto p-2 bg-zinc-50 dark:bg-black/30 rounded-xl border border-zinc-200 dark:border-zinc-800/50" },
                                    Object.keys(ICON_LIB).map(iconName => {
                                        const I = ICON_LIB[iconName];
                                        return React.createElement("button", { key: iconName, onClick: () => setNewTool({...newTool, icon: iconName}), className: `p-2 rounded-lg flex items-center justify-center transition-all ${newTool.icon === iconName ? 'bg-indigo-600 text-white' : 'text-zinc-500 hover:bg-zinc-200 dark:hover:bg-zinc-800'}` }, React.createElement(I, { size: 18 }));
                                    })
                                )
                            ),
                            React.createElement("button", { onClick: handleAdd, className: "w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl mt-4" }, "Add Tool")
                        )
                    )
                ),
                editingTool && React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4" },
                    React.createElement("div", { className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl w-full max-w-lg p-6 relative shadow-xl" },
                        React.createElement("button", { onClick: () => setEditingTool(null), className: "absolute top-4 right-4 text-zinc-400 hover:text-zinc-600 dark:hover:text-white" }, React.createElement(X, { size: 20 })),
                        React.createElement("h3", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-6" }, "Edit Tool"),
                        React.createElement("div", { className: "space-y-4" },
                            React.createElement("input", { value: editingTool.name, onChange: e => setEditingTool({...editingTool, name: e.target.value}), placeholder: "Tool Name", className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" }),
                            React.createElement("input", { value: editingTool.url, onChange: e => setEditingTool({...editingTool, url: e.target.value}), placeholder: "URL (https://...)", className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" }),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-1 block" }, "Category"),
                                React.createElement("select", { value: editingTool.category, onChange: e => setEditingTool({...editingTool, category: e.target.value}), className: "w-full p-3 bg-zinc-50 dark:bg-black/50 border border-zinc-200 dark:border-zinc-700 rounded-xl text-zinc-900 dark:text-white focus:border-indigo-500 outline-none" },
                                    categories.map(c => React.createElement("option", { key: c, value: c }, c))
                                )
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "text-xs text-zinc-500 mb-2 block" }, "Select Icon"),
                                React.createElement("div", { className: "grid grid-cols-6 gap-2 max-h-32 overflow-y-auto p-2 bg-zinc-50 dark:bg-black/30 rounded-xl border border-zinc-200 dark:border-zinc-800/50" },
                                    Object.keys(ICON_LIB).map(iconName => {
                                        const I = ICON_LIB[iconName];
                                        return React.createElement("button", { key: iconName, onClick: () => setEditingTool({...editingTool, icon: iconName}), className: `p-2 rounded-lg flex items-center justify-center transition-all ${editingTool.icon === iconName ? 'bg-indigo-600 text-white' : 'text-zinc-500 hover:bg-zinc-200 dark:hover:bg-zinc-800'}` }, React.createElement(I, { size: 18 }));
                                    })
                                )
                            ),
                            React.createElement("button", { onClick: handleUpdate, className: "w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl mt-4" }, "Save Changes")
                        )
                    )
                )
            );
        };

        const WeeklyPlanView = ({ plan, onUpdate }) => {
            const focus = plan.focus || "";
            const objectives = plan.objectives || [];
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const dailyTasks = plan.dailyTasks || {}; 

            const updateField = (field, value) => onUpdate({ ...plan, [field]: value });
            
            const addObjective = (text) => updateField('objectives', [...objectives, { id: generateUUID(), text, completed: false }]);
            const toggleObjective = (id) => updateField('objectives', objectives.map(o => o.id === id ? { ...o, completed: !o.completed } : o));
            const deleteObjective = (id) => updateField('objectives', objectives.filter(o => o.id !== id));

            const addDailyTask = (day, text) => {
                const currentTasks = dailyTasks[day] || [];
                const newTasks = { ...dailyTasks, [day]: [...currentTasks, { id: generateUUID(), text, completed: false }] };
                onUpdate({ ...plan, dailyTasks: newTasks });
            };
            const toggleDailyTask = (day, id) => {
                const currentTasks = dailyTasks[day] || [];
                const updated = currentTasks.map(t => t.id === id ? { ...t, completed: !t.completed } : t);
                onUpdate({ ...plan, dailyTasks: { ...dailyTasks, [day]: updated } });
            };
            const deleteDailyTask = (day, id) => {
                const currentTasks = dailyTasks[day] || [];
                const updated = currentTasks.filter(t => t.id !== id);
                onUpdate({ ...plan, dailyTasks: { ...dailyTasks, [day]: updated } });
            };

            return React.createElement("div", { className: "p-4 md:p-8 pb-32 h-full flex flex-col overflow-y-auto max-w-7xl mx-auto" },
                 React.createElement("div", { className: "mb-8" },
                    React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white" }, "Weekly Roadmap"),
                    React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-sm" }, "Zoom out. execute strategy.")
                ),

                React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8" },
                    React.createElement("div", { className: "lg:col-span-1" },
                        React.createElement(Card, { title: "Weekly Compass", className: "h-full bg-indigo-50/50 dark:bg-indigo-900/10 border-indigo-200 dark:border-indigo-500/30" },
                            React.createElement("textarea", { 
                                value: focus, 
                                onChange: (e) => updateField('focus', e.target.value),
                                placeholder: "What is the ONE thing that makes this week a success?",
                                className: "w-full h-full min-h-[120px] bg-transparent text-lg font-bold text-indigo-900 dark:text-indigo-100 placeholder:text-indigo-300 dark:placeholder:text-indigo-700/50 resize-none focus:outline-none"
                            })
                        )
                    ),
                    
                    React.createElement("div", { className: "lg:col-span-2" },
                         React.createElement(Card, { title: "Key Objectives", className: "h-full" },
                            React.createElement(EditableList, { 
                                items: objectives, 
                                onAdd: addObjective, 
                                onToggle: toggleObjective, 
                                onDelete: deleteObjective, 
                                placeholder: "Add a goal for this week..." 
                            })
                         )
                    )
                ),

                React.createElement("div", null,
                    React.createElement("h3", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-4 flex items-center gap-2" },
                        React.createElement(Calendar, { size: 20 }), "The Week Ahead"
                    ),
                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4" },
                        days.map(day => (
                            React.createElement("div", { key: day, className: "p-4 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-colors flex flex-col h-full min-h-[200px]" },
                                React.createElement("div", { className: "text-xs font-bold text-zinc-400 uppercase tracking-widest mb-3 border-b border-zinc-100 dark:border-zinc-800 pb-2" }, day),
                                React.createElement(EditableList, { 
                                    items: dailyTasks[day] || [], 
                                    onAdd: (text) => addDailyTask(day, text), 
                                    onToggle: (id) => toggleDailyTask(day, id), 
                                    onDelete: (id) => deleteDailyTask(day, id), 
                                    placeholder: "Add task..." 
                                })
                            )
                        ))
                    )
                )
            );
        };

        const MonthlyPlanView = ({ plan, onUpdate }) => {
            const theme = plan.theme || "";
            const goals = plan.goals || []; 
            const weeks = plan.weeks || { week1: "", week2: "", week3: "", week4: "" };

            const updateField = (field, value) => onUpdate({ ...plan, [field]: value });
            
            const addGoal = (text) => updateField('goals', [...goals, { id: generateUUID(), text, completed: false }]);
            const toggleGoal = (id) => updateField('goals', goals.map(g => g.id === id ? { ...g, completed: !g.completed } : g));
            const deleteGoal = (id) => updateField('goals', goals.filter(g => g.id !== id));
            const updateWeek = (key, text) => updateField('weeks', { ...weeks, [key]: text });

            const now = new Date();
            const currentYear = now.getFullYear();
            const currentMonth = now.getMonth();
            const currentDay = now.getDate();
            const monthName = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

            const getWeekInfo = (index) => {
                let endDay;
                let isCurrent = false;
                
                if (index === 0) {
                    endDay = 7;
                    isCurrent = currentDay <= 7;
                } else if (index === 1) {
                    endDay = 14;
                    isCurrent = currentDay > 7 && currentDay <= 14;
                } else if (index === 2) {
                    endDay = 21;
                    isCurrent = currentDay > 14 && currentDay <= 21;
                } else {
                    endDay = new Date(currentYear, currentMonth + 1, 0).getDate(); 
                    isCurrent = currentDay > 21;
                }

                const endDate = new Date(currentYear, currentMonth, endDay);
                const dayNum = endDate.getDate();
                const suffix = (dayNum === 1 || dayNum === 21 || dayNum === 31) ? 'st' : (dayNum === 2 || dayNum === 22) ? 'nd' : (dayNum === 3 || dayNum === 23) ? 'rd' : 'th';
                const formattedDate = `${dayNum}${suffix} ${endDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}`;
                
                return { isCurrent, label: `Week ending ${formattedDate}` };
            };

            return React.createElement("div", { className: "p-4 md:p-8 pb-32 h-full flex flex-col overflow-y-auto max-w-7xl mx-auto" },
                React.createElement("div", { className: "mb-8 flex flex-col items-center text-center" },
                    React.createElement("div", { className: "text-indigo-500 dark:text-indigo-400 font-bold uppercase tracking-widest text-xs mb-2" }, monthName),
                    React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white" }, "Monthly Blueprint"),
                    React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-sm" }, "The big picture. One month at a time.")
                ),

                React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8" },
                    React.createElement("div", { className: "lg:col-span-1" },
                        React.createElement(Card, { title: "Monthly Theme", className: "h-full bg-purple-50/50 dark:bg-purple-900/10 border-purple-200 dark:border-purple-500/30" },
                            React.createElement("textarea", { 
                                value: theme, 
                                onChange: (e) => updateField('theme', e.target.value),
                                placeholder: "e.g., 'Relentless Consistency' or 'Deep Health'",
                                className: "w-full h-full min-h-[120px] bg-transparent text-lg font-bold text-purple-900 dark:text-purple-100 placeholder:text-purple-300 dark:placeholder:text-purple-700/50 resize-none focus:outline-none"
                            })
                        )
                    ),
                    
                    React.createElement("div", { className: "lg:col-span-2" },
                         React.createElement(Card, { title: "Top Priorities", className: "h-full" },
                            React.createElement(EditableList, { 
                                items: goals, 
                                onAdd: addGoal, 
                                onToggle: toggleGoal, 
                                onDelete: deleteGoal, 
                                placeholder: "Add a major goal for this month..." 
                            })
                         )
                    )
                ),

                React.createElement("div", null,
                    React.createElement("h3", { className: "text-xl font-bold text-zinc-900 dark:text-white mb-4 flex items-center gap-2" },
                        React.createElement(CalendarRange, { size: 20 }), "Weekly Sprints"
                    ),
                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4" },
                        ['week1', 'week2', 'week3', 'week4'].map((wKey, i) => {
                            const { isCurrent, label } = getWeekInfo(i);
                            return React.createElement("div", { key: wKey, className: `p-4 border rounded-2xl shadow-sm flex flex-col h-full min-h-[180px] transition-all duration-300 ${isCurrent ? 'bg-indigo-50 dark:bg-indigo-900/10 border-indigo-500 ring-1 ring-indigo-500 transform scale-[1.02]' : 'bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700'}` },
                                React.createElement("div", { className: "flex justify-between items-center mb-3 border-b border-zinc-100 dark:border-zinc-800 pb-2" },
                                    React.createElement("span", { className: `text-xs font-bold uppercase tracking-widest ${isCurrent ? 'text-indigo-600 dark:text-indigo-400' : 'text-zinc-400'}` }, `Week ${i + 1}`),
                                    isCurrent && React.createElement("span", { className: "text-[10px] font-bold bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-300 px-2 py-0.5 rounded-full" }, "Current")
                                ),
                                React.createElement("div", { className: "text-[10px] text-zinc-400 mb-2 font-medium" }, label),
                                React.createElement("textarea", { 
                                    value: weeks[wKey], 
                                    onChange: (e) => updateWeek(wKey, e.target.value), 
                                    className: "w-full h-full bg-transparent text-sm resize-none focus:outline-none text-zinc-700 dark:text-zinc-300 placeholder:text-zinc-400 dark:placeholder:text-zinc-700",
                                    placeholder: "Main focus for this week..." 
                                })
                            )
                        })
                    )
                )
            );
        };

        const DailyPlanView = ({ plan = {}, onUpdate }) => {
            const schedule = plan.schedule || {};
            const rawPriorities = Array.isArray(plan.priorities) ? plan.priorities : [];
            const priorities = [rawPriorities[0] || '', rawPriorities[1] || '', rawPriorities[2] || ''];
            const note = plan.notes || '';
            const minorTasks = plan.minorTasks || [];
            const hours = Array.from({length: 24}, (_, i) => i);

            const handleScheduleChange = (hour, val) => { onUpdate({ ...plan, schedule: { ...schedule, [hour]: val } }); };
            const handlePriorityChange = (idx, val) => { const newP = [...priorities]; newP[idx] = val; onUpdate({ ...plan, priorities: newP }); };
            const clearPlan = () => { if(confirm("Clear today's plan?")) { onUpdate({ priorities: ['', '', ''], schedule: {}, notes: '', minorTasks: [] }); } };

            const addMinorTask = (text) => {
                const newTask = { id: generateUUID(), text, completed: false };
                onUpdate({ ...plan, minorTasks: [...minorTasks, newTask] });
            };
            const toggleMinorTask = (id) => {
                onUpdate({ ...plan, minorTasks: minorTasks.map(t => t.id === id ? { ...t, completed: !t.completed } : t) });
            };
            const deleteMinorTask = (id) => {
                onUpdate({ ...plan, minorTasks: minorTasks.filter(t => t.id !== id) });
            };

            return React.createElement("div", { className: "p-4 md:p-8 pb-32 max-w-4xl mx-auto h-full overflow-y-auto" },
                React.createElement("div", { className: "flex justify-between items-center mb-8" },
                    React.createElement("div", null,
                        React.createElement("h2", { className: "text-3xl font-bold text-zinc-900 dark:text-white" }, "Daily Architect"),
                        React.createElement("p", { className: "text-zinc-500 dark:text-zinc-400 text-sm" }, new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' }))
                    ),
                    React.createElement("button", { onClick: clearPlan, className: "text-xs font-bold text-zinc-400 hover:text-red-500 flex items-center gap-1 transition-colors" }, React.createElement(Trash2, { size: 14 }), "Reset")
                ),
                
                React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-8" },
                    priorities.map((p, i) => 
                        React.createElement("div", { key: i, className: "bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-4 rounded-2xl shadow-sm flex flex-col gap-2 hover:border-indigo-500/30 transition-colors" },
                            React.createElement("span", { className: "text-xs font-bold text-indigo-500 uppercase tracking-widest flex items-center gap-1" }, React.createElement(Star, { size: 10 }), `Priority ${i+1}`),
                            React.createElement("textarea", { value: p, onChange: (e) => handlePriorityChange(i, e.target.value), className: "w-full bg-transparent resize-none focus:outline-none text-zinc-800 dark:text-zinc-200 font-medium h-full min-h-[40px] placeholder:text-zinc-300 dark:placeholder:text-zinc-700", placeholder: "Main focus..." })
                        )
                    )
                ),

                React.createElement("div", { className: "bg-white/50 dark:bg-zinc-900/30 border border-zinc-200 dark:border-zinc-800 rounded-3xl p-6 mb-8 shadow-sm" },
                    React.createElement("h3", { className: "text-xs font-bold text-zinc-500 uppercase tracking-widest mb-4 flex items-center gap-2" }, React.createElement(ListTodo, { size: 14 }), "Side Quests (Minor Tasks)"),
                    React.createElement(EditableList, { 
                        items: minorTasks, 
                        onAdd: addMinorTask, 
                        onToggle: toggleMinorTask, 
                        onDelete: deleteMinorTask, 
                        placeholder: "Add a minor task (e.g., call bank, email John)..." 
                    })
                ),

                React.createElement("div", { className: "bg-white dark:bg-zinc-900/50 rounded-3xl border border-zinc-200 dark:border-zinc-800 shadow-sm overflow-hidden mb-8" },
                    React.createElement("div", { className: "p-4 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-950/50 flex items-center justify-between" },
                        React.createElement("div", { className: "flex items-center gap-2" }, React.createElement(Clock, { size: 16, className: "text-zinc-400" }), React.createElement("h3", { className: "font-bold text-zinc-700 dark:text-zinc-300 text-sm" }, "24-Hour Schedule")),
                        React.createElement("span", { className: "text-xs text-zinc-400" }, "All Day")
                    ),
                    React.createElement("div", { className: "divide-y divide-zinc-100 dark:divide-zinc-800/50" },
                        hours.map(h => {
                            const ampm = h >= 12 ? 'PM' : 'AM';
                            const h12 = h % 12 || 12;
                            const timeLabel = `${h12} ${ampm}`;
                            const val = schedule[h] || '';
                            const currentHour = new Date().getHours();
                            const isNow = currentHour === h;
                            const isPast = currentHour > h;
                            
                            return React.createElement("div", { key: h, className: `flex group min-h-[3.5rem] transition-colors ${isNow ? 'bg-indigo-50/50 dark:bg-indigo-900/10' : ''}` },
                                React.createElement("div", { className: `w-20 md:w-24 p-4 text-xs font-bold border-r border-zinc-100 dark:border-zinc-800 flex items-center justify-center shrink-0 ${isNow ? 'text-indigo-600 dark:text-indigo-400' : isPast ? 'text-zinc-300 dark:text-zinc-700' : 'text-zinc-500 dark:text-zinc-500'}` }, timeLabel),
                                React.createElement("div", { className: "flex-1 relative" },
                                    isNow && React.createElement("div", { className: "absolute left-0 top-0 bottom-0 w-1 bg-indigo-500" }),
                                    React.createElement("input", { value: val, onChange: (e) => handleScheduleChange(h, e.target.value), className: `w-full h-full p-4 bg-transparent text-sm focus:bg-white dark:focus:bg-zinc-900 outline-none transition-all ${isPast ? 'text-zinc-400 dark:text-zinc-600 line-through decoration-zinc-200 dark:decoration-zinc-800' : 'text-zinc-700 dark:text-zinc-300'}`, placeholder: "" })
                                )
                            );
                        })
                    )
                ),
                
                React.createElement("div", null,
                    React.createElement("h3", { className: "text-xs font-bold uppercase text-zinc-500 mb-3 tracking-widest flex items-center gap-2" }, React.createElement(Edit3, { size: 14 }), "Day Reflection"),
                    React.createElement("textarea", { value: note, onChange: (e) => onUpdate({...plan, notes: e.target.value}), className: "w-full h-32 p-4 rounded-xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 focus:border-indigo-500 outline-none resize-none text-zinc-700 dark:text-zinc-300 placeholder:text-zinc-400 dark:placeholder:text-zinc-600 shadow-sm", placeholder: "What went well? What can be improved?" })
                )
            );
        };

        const App = () => {
            const tabConfig = { dashboard: { label: "Dashboard", icon: Layout }, dailyPlan: { label: "Daily Plan", icon: CalendarDays }, weeklyPlan: { label: "Weekly Plan", icon: Calendar }, monthlyPlan: { label: "Monthly Plan", icon: CalendarRange }, goals2026: { label: "2026 Vision", icon: Flag }, braindump: { label: "Brain Dump", icon: Brain }, focus: { label: "Focus Timer", icon: Timer }, fitness: { label: "Fitness", icon: Dumbbell }, food: { label: "Nutrition", icon: Utensils }, tools: { label: "Tools", icon: Wrench }, library: { label: "Library", icon: Book }, profile: { label: "Profile", icon: User } };
            const VALID_TABS = [...Object.keys(tabConfig), 'deadlines'];
            const [activeTab, setActiveTab] = useState(() => { const saved = localStorage.getItem('lifeos_active_tab'); return (saved && VALID_TABS.includes(saved)) ? saved : "dashboard"; });
            const [darkMode, setDarkMode] = useState(() => { const saved = localStorage.getItem('lifeos_dark_mode'); return saved !== null ? JSON.parse(saved) : true; });
            const [isDataLoaded, setIsDataLoaded] = useState(false);
            
            useEffect(() => { localStorage.setItem('lifeos_active_tab', activeTab); }, [activeTab]);
            useEffect(() => { localStorage.setItem('lifeos_dark_mode', JSON.stringify(darkMode)); if (darkMode) { document.documentElement.classList.add('dark'); } else { document.documentElement.classList.remove('dark'); } }, [darkMode]);
            
            const [user, setUser] = useState(null);
            const [showSettings, setShowSettings] = useState(false);
            const [deadlines, setDeadlines] = useState([]);
            const [dumps, setDumps] = useState([]);
            const [meals, setMeals] = useState(DEFAULT_MEALS);
            const [goalsData, setGoalsData] = useState(DEFAULT_GOALS_DATA);
            const [dashboardData, setDashboardData] = useState({});
            const [tools, setTools] = useState(DEFAULT_TOOLS);
            const [books, setBooks] = useState([]);
            const [toolCategories, setToolCategories] = useState(DEFAULT_TOOLS_CATEGORIES);
            const [bookCategories, setBookCategories] = useState(DEFAULT_BOOK_CATEGORIES);
            const [dailyPlan, setDailyPlan] = useState({ priorities: ['', '', ''], schedule: {}, notes: '', minorTasks: [] });
            const [weeklyPlan, setWeeklyPlan] = useState({ focus: "", objectives: [], dailyTasks: {} });
            const [monthlyPlan, setMonthlyPlan] = useState({ theme: "", goals: [], weeks: { week1: "", week2: "", week3: "", week4: "" } });
            const [fitnessData, setFitnessData] = useState({ gym: GYM_WORKOUT_PLAN, home: HOME_WORKOUT_PLAN, gymInfo: { pin: '', notes: '' } });
            
            const [activeSound, setActiveSound] = useState(null);
            const [isPlayingSound, setIsPlayingSound] = useState(false);
            const audioRef = useRef(new Audio());
            const [focusState, setFocusState] = useState({ timeLeft: 1500, isActive: false, initialTime: 1500, mode: 'FOCUS' });
            
            useEffect(() => { let interval = null; if (focusState.isActive && focusState.timeLeft > 0) { interval = setInterval(() => { setFocusState(prev => ({ ...prev, timeLeft: prev.timeLeft - 1 })); }, 1000); } else if (focusState.timeLeft === 0) { setFocusState(prev => ({ ...prev, isActive: false })); } return () => clearInterval(interval); }, [focusState.isActive, focusState.timeLeft]);
            
            const handleTimerToggle = () => setFocusState(prev => ({ ...prev, isActive: !prev.isActive }));
            const handleTimerReset = (newTime, newMode) => { const time = newTime || focusState.initialTime; setFocusState({ timeLeft: time, isActive: false, initialTime: time, mode: newMode || 'FOCUS' }); };
            
            const toggleSound = async (sound) => { try { if (activeSound === sound.id && isPlayingSound) { audioRef.current.pause(); setIsPlayingSound(false); } else { if (isPlayingSound) { audioRef.current.pause(); } audioRef.current.src = sound.url; audioRef.current.loop = true; await audioRef.current.play(); setIsPlayingSound(true); setActiveSound(sound.id); } } catch (err) { console.error("Audio playback error:", err); setIsPlayingSound(false); } };

            useEffect(() => { if(isSupabaseConfigured) { supabase.from('deadlines').select('count', { count: 'exact', head: true }).then(({ error }) => { if(error) console.log("Cloud DB unreachable."); }); } }, []);
            useEffect(() => { const sessionUser = JSON.parse(localStorage.getItem('lifeos_user_session')); if (sessionUser) setUser(sessionUser); if (isSupabaseConfigured) { supabase.auth.getSession().then(({ data: { session } }) => { if (session) setUser({ ...session.user, isLocal: false }); }); const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => { if (session) setUser({ ...session.user, isLocal: false }); }); return () => subscription.unsubscribe(); } }, []);

            useEffect(() => {
                if (!user) return;
                if (!user.isLocal && isSupabaseConfigured) {
                    const fetchData = async () => {
                        const { data: dData } = await supabase.from('deadlines').select('*').eq('user_id', user.id); if(dData) setDeadlines(dData);
                        const { data: bData } = await supabase.from('brain_dumps').select('*').eq('user_id', user.id); if(bData) setDumps(bData);
                        const { data: mData } = await supabase.from('meals').select('*').eq('user_id', user.id); if(mData && mData.length > 0) setMeals(mData);
                        const { data: aData } = await supabase.from('app_data').select('*').eq('user_id', user.id).single();
                        if(aData) { 
                            if(aData.goals_2026) setGoalsData(aData.goals_2026); 
                            if(aData.dashboard_config) setDashboardData(aData.dashboard_config); 
                            if(aData.fitness_data) setFitnessData(aData.fitness_data); 
                            if(aData.tool_categories) setToolCategories(aData.tool_categories); 
                            if(aData.book_categories) setBookCategories(aData.book_categories);
                            if(aData.daily_plan) setDailyPlan(aData.daily_plan);
                            if(aData.weekly_plan) setWeeklyPlan(aData.weekly_plan);
                            if(aData.monthly_plan) setMonthlyPlan(aData.monthly_plan);
                        }
                        const { data: tlData } = await supabase.from('tools').select('*').eq('user_id', user.id); if(tlData && tlData.length > 0) setTools(tlData);
                        const { data: lData } = await supabase.from('library').select('*').eq('user_id', user.id); if(lData && lData.length > 0) setBooks(lData);
                        setIsDataLoaded(true);
                    };
                    fetchData();
                    const channel = supabase.channel('db-changes').on('postgres_changes', { event: '*', schema: 'public' }, () => fetchData()).subscribe();
                    return () => supabase.removeChannel(channel);
                } else {
                    try {
                        const prefix = `lifeos_data_${user.id}_`;
                        setDeadlines(JSON.parse(localStorage.getItem(`${prefix}deadlines`) || '[]'));
                        setDumps(JSON.parse(localStorage.getItem(`${prefix}dumps`) || '[]'));
                        setMeals(JSON.parse(localStorage.getItem(`${prefix}meals`) || JSON.stringify(DEFAULT_MEALS)));
                        setGoalsData(JSON.parse(localStorage.getItem(`${prefix}goals_2026`) || JSON.stringify(DEFAULT_GOALS_DATA)));
                        setTools(JSON.parse(localStorage.getItem(`${prefix}tools`) || JSON.stringify(DEFAULT_TOOLS)));
                        setBooks(JSON.parse(localStorage.getItem(`${prefix}books`) || '[]'));
                        setToolCategories(JSON.parse(localStorage.getItem(`${prefix}tool_categories`) || JSON.stringify(DEFAULT_TOOLS_CATEGORIES)));
                        setBookCategories(JSON.parse(localStorage.getItem(`${prefix}book_categories`) || JSON.stringify(DEFAULT_BOOK_CATEGORIES)));
                        setDashboardData(JSON.parse(localStorage.getItem(`${prefix}dashboard`) || '{}'));
                        setFitnessData(JSON.parse(localStorage.getItem(`${prefix}fitness`) || JSON.stringify({ gym: GYM_WORKOUT_PLAN, home: HOME_WORKOUT_PLAN })));
                        setDailyPlan(JSON.parse(localStorage.getItem(`${prefix}daily_plan`) || JSON.stringify({ priorities: ['', '', ''], schedule: {}, notes: '', minorTasks: [] })));
                        setWeeklyPlan(JSON.parse(localStorage.getItem(`${prefix}weekly_plan`) || JSON.stringify({ focus: "", objectives: [], dailyTasks: {} })));
                        setMonthlyPlan(JSON.parse(localStorage.getItem(`${prefix}monthly_plan`) || JSON.stringify({ theme: "", goals: [], weeks: { week1: "", week2: "", week3: "", week4: "" } })));
                    } catch(e) {}
                    setIsDataLoaded(true);
                }
            }, [user]);

            useEffect(() => {
                if(user && user.isLocal && isDataLoaded) {
                    const prefix = `lifeos_data_${user.id}_`;
                    localStorage.setItem(`${prefix}deadlines`, JSON.stringify(deadlines));
                    localStorage.setItem(`${prefix}dumps`, JSON.stringify(dumps));
                    localStorage.setItem(`${prefix}meals`, JSON.stringify(meals));
                    localStorage.setItem(`${prefix}goals_2026`, JSON.stringify(goalsData));
                    localStorage.setItem(`${prefix}dashboard`, JSON.stringify(dashboardData));
                    localStorage.setItem(`${prefix}tools`, JSON.stringify(tools));
                    localStorage.setItem(`${prefix}books`, JSON.stringify(books));
                    localStorage.setItem(`${prefix}tool_categories`, JSON.stringify(toolCategories));
                    localStorage.setItem(`${prefix}book_categories`, JSON.stringify(bookCategories));
                    localStorage.setItem(`${prefix}fitness`, JSON.stringify(fitnessData));
                    localStorage.setItem(`${prefix}daily_plan`, JSON.stringify(dailyPlan));
                    localStorage.setItem(`${prefix}weekly_plan`, JSON.stringify(weeklyPlan));
                    localStorage.setItem(`${prefix}monthly_plan`, JSON.stringify(monthlyPlan));
                }
            }, [deadlines, dumps, meals, goalsData, dashboardData, tools, books, toolCategories, bookCategories, fitnessData, dailyPlan, weeklyPlan, monthlyPlan, user, isDataLoaded]);

            // AI Meal Plan Generation
            const generateAIMealPlan = async () => {
                const apiKey = "";
                const mission = goalsData.mission || "Be healthy and disciplined.";
                const systemPrompt = `You are a world-class performance nutritionist. Your goal is to create a highly optimized weekly meal plan based on the user's mission: "${mission}".
                The plan must cover Monday through Sunday, with exactly 4 entries per day: Breakfast, Lunch, Dinner, and Snack.
                The meals should be varied, nutritious, and supportive of a high-performance lifestyle.
                
                You MUST return ONLY valid JSON in the following format:
                [
                    { "day": "Monday", "type": "Breakfast", "text": "Details..." },
                    ...
                ]`;
                
                const userQuery = "Generate my high-performance weekly meal plan.";
                
                let retries = 0;
                const maxRetries = 5;
                
                const callGemini = async () => {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: userQuery }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] },
                            generationConfig: {
                                responseMimeType: "application/json",
                                responseSchema: {
                                    type: "ARRAY",
                                    items: {
                                        type: "OBJECT",
                                        properties: {
                                            day: { type: "STRING" },
                                            type: { type: "STRING", enum: ["Breakfast", "Lunch", "Dinner", "Snack"] },
                                            text: { type: "STRING" }
                                        },
                                        required: ["day", "type", "text"]
                                    }
                                }
                            }
                        })
                    });
                    
                    if (!response.ok) throw new Error("API failed");
                    const result = await response.json();
                    
                    // Robust parsing: strip potential markdown code fences
                    const text = result.candidates[0].content.parts[0].text;
                    const jsonStr = text.replace(/```json/g, '').replace(/```/g, '').trim();
                    return JSON.parse(jsonStr);
                };

                const executeWithRetry = async () => {
                    try {
                        const plan = await callGemini();
                        
                        // Update local state
                        const planWithUser = plan.map(item => ({ ...item, id: generateUUID(), user_id: user.id }));
                        setMeals(planWithUser);

                        // Sync to database
                        if (!user.isLocal && isSupabaseConfigured) {
                            await supabase.from('meals').delete().eq('user_id', user.id);
                            await supabase.from('meals').insert(planWithUser);
                        }
                    } catch (error) {
                        if (retries < maxRetries) {
                            retries++;
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, retries) * 1000));
                            return executeWithRetry();
                        }
                        console.error("AI Generation failed after retries", error);
                        throw error; // Re-throw to allow UI to show error
                    }
                };

                await executeWithRetry();
            };

            const handleLoginSuccess = (u) => { setUser(u); localStorage.setItem('lifeos_user_session', JSON.stringify(u)); };
            const handleLogout = async () => { if (isSupabaseConfigured) await supabase.auth.signOut(); localStorage.removeItem('lifeos_user_session'); setUser(null); };

            const handleAddDeadline = async (item) => { const newItem = { ...item, id: generateUUID(), user_id: user.id }; setDeadlines(prev => [...prev, newItem]); if (!user.isLocal && isSupabaseConfigured) await supabase.from('deadlines').insert(newItem); };
            const handleDeleteDeadline = async (id) => { setDeadlines(prev => prev.filter(i => i.id !== id)); if (!user.isLocal && isSupabaseConfigured) await supabase.from('deadlines').delete().eq('id', id); };
            const handleAddDump = async (text) => { const newItem = { text, id: generateUUID(), user_id: user.id }; setDumps(prev => [...prev, newItem]); if (!user.isLocal && isSupabaseConfigured) await supabase.from('brain_dumps').insert(newItem); };
            const handleDeleteDump = async (id) => { setDumps(prev => prev.filter(d => d.id !== id)); if (!user.isLocal && isSupabaseConfigured) await supabase.from('brain_dumps').delete().eq('id', id); };
            const handleAddTool = async (item) => { const newItem = { ...item, id: generateUUID(), user_id: user.id }; setTools(prev => [...prev, newItem]); if (!user.isLocal && isSupabaseConfigured) await supabase.from('tools').insert(newItem); };
            const handleAddCategory = async (cat) => { const newCats = [...toolCategories, cat]; setToolCategories(newCats); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, tool_categories: newCats }, { onConflict: 'user_id' }); };
            const handleAddBookCategory = async (cat) => { const newCats = [...bookCategories, cat]; setBookCategories(newCats); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, book_categories: newCats }, { onConflict: 'user_id' }); };
            const handleUpdateMeal = async (day, type, text) => { setMeals(prev => { const exists = prev.find(m => m.day === day && m.type === type); if(exists) return prev.map(m => m.day === day && m.type === type ? { ...m, text } : m); return [...prev, { day, type, text, user_id: user.id, id: generateUUID() }]; }); if (!user.isLocal && isSupabaseConfigured) { await supabase.from('meals').delete().match({ user_id: user.id, day, type }); await supabase.from('meals').insert({ user_id: user.id, day, type, text }); } };
            const handleUpdateFitness = async (type, newPlan) => { const newData = { ...fitnessData, [type]: newPlan }; setFitnessData(newData); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, fitness_data: newData }, { onConflict: 'user_id' }); };
            const handleUpdateDashboard = async (newData) => { setDashboardData(newData); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, dashboard_config: newData }, { onConflict: 'user_id' }); };
            const handleUpdateDailyPlan = async (newData) => { setDailyPlan(newData); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, daily_plan: newData }, { onConflict: 'user_id' }); };
            const handleUpdateGoals2026 = async (newData) => { setGoalsData(newData); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, goals_2026: newData }, { onConflict: 'user_id' }); };
            const handleUpdateWeeklyPlan = async (newData) => { setWeeklyPlan(newData); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, weekly_plan: newData }, { onConflict: 'user_id' }); };
            const handleUpdateMonthlyPlan = async (newData) => { setMonthlyPlan(newData); if (!user.isLocal && isSupabaseConfigured) await supabase.from('app_data').upsert({ user_id: user.id, monthly_plan: newData }, { onConflict: 'user_id' }); };
            const handleDeleteCategory = async (catToDelete) => { if (catToDelete === "General") return; if (confirm(`Delete category "${catToDelete}"? Tools will be moved to "General".`)) { const newCats = toolCategories.filter(c => c !== catToDelete); setToolCategories(newCats); const newTools = tools.map(t => t.category === catToDelete ? { ...t, category: "General" } : t); setTools(newTools); if (!user.isLocal && isSupabaseConfigured) { await supabase.from('app_data').upsert({ user_id: user.id, tool_categories: newCats }, { onConflict: 'user_id' }); const toolsToUpdate = tools.filter(t => t.category === catToDelete); for(const tool of toolsToUpdate) { await supabase.from('tools').update({ category: "General" }).eq('id', tool.id); } } } };
            const handleDeleteBookCategory = async (catToDelete) => { if (catToDelete === "General") return; if (confirm(`Delete category "${catToDelete}"? Books will be moved to "General".`)) { const newCats = bookCategories.filter(c => c !== catToDelete); setBookCategories(newCats); const newBooks = books.map(b => b.category === catToDelete ? { ...b, category: "General" } : b); setBooks(newBooks); if (!user.isLocal && isSupabaseConfigured) { await supabase.from('app_data').upsert({ user_id: user.id, book_categories: newCats }, { onConflict: 'user_id' }); const booksToUpdate = books.filter(b => b.category === catToDelete); for(const book of booksToUpdate) { await supabase.from('library').update({ category: "General" }).eq('id', book.id); } } } };
            const handleRenameCategory = async (oldName, newName) => { if (!newName.trim() || toolCategories.includes(newName)) return; const newCats = toolCategories.map(c => c === oldName ? newName : c); setToolCategories(newCats); const newTools = tools.map(t => t.category === oldName ? { ...t, category: newName } : t); setTools(newTools); if (!user.isLocal && isSupabaseConfigured) { await supabase.from('app_data').upsert({ user_id: user.id, tool_categories: newCats }, { onConflict: 'user_id' }); const toolsToUpdate = tools.filter(t => t.category === oldName); for(const tool of toolsToUpdate) { await supabase.from('tools').update({ category: newName }).eq('id', tool.id); } } };
            const handleRenameBookCategory = async (oldName, newName) => { if (!newName.trim() || bookCategories.includes(newName)) return; const newCats = bookCategories.map(c => c === oldName ? newName : c); setBookCategories(newCats); const newBooks = books.map(b => b.category === oldName ? { ...b, category: newName } : b); setBooks(newBooks); if (!user.isLocal && isSupabaseConfigured) { await supabase.from('app_data').upsert({ user_id: user.id, book_categories: newCats }, { onConflict: 'user_id' }); const booksToUpdate = books.filter(b => b.category === oldName); for(const book of booksToUpdate) { await supabase.from('library').update({ category: newName }).eq('id', book.id); } } };
            const handleUpdateProfile = async (newName) => { if (user.isLocal) { const updatedUser = { ...user, displayName: newName }; setUser(updatedUser); localStorage.setItem('lifeos_user_session', JSON.stringify(updatedUser)); localStorage.setItem('lifeos_user', JSON.stringify(updatedUser)); } else if (isSupabaseConfigured) { const { data, error } = await supabase.auth.updateUser({ data: { full_name: newName } }); if (!error && data.user) { setUser({ ...data.user, isLocal: false }); } } };
            const handleDeleteTool = async (id) => { if (confirm("Delete this tool?")) { setTools(prev => prev.filter(t => t.id !== id)); if (!user.isLocal && isSupabaseConfigured) await supabase.from('tools').delete().eq('id', id); } };
            const handleUpdateTool = async (updatedTool) => { setTools(prev => prev.map(t => t.id === updatedTool.id ? updatedTool : t)); if (!user.isLocal && isSupabaseConfigured) await supabase.from('tools').update(updatedTool).eq('id', updatedTool.id); };
            const handleAddBook = async (book) => { const newItem = { ...book, id: generateUUID(), user_id: user.id }; setBooks(prev => [...prev, newItem]); if (!user.isLocal && isSupabaseConfigured) await supabase.from('library').insert(newItem); };
            const handleDeleteBook = async (id) => { setBooks(prev => prev.filter(b => b.id !== id)); if (!user.isLocal && isSupabaseConfigured) await supabase.from('library').delete().eq('id', id); };
            const handleUpdateBook = async (updatedBook) => { setBooks(prev => prev.map(b => b.id === updatedBook.id ? updatedBook : b)); if (!user.isLocal && isSupabaseConfigured) await supabase.from('library').update(updatedBook).eq('id', updatedBook.id); };

            if (!user) return React.createElement(LandingPage, { onLoginSuccess: handleLoginSuccess, onGuestLogin: handleLoginSuccess });

            return React.createElement("div", { className: "min-h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 font-sans transition-colors duration-300" },
                React.createElement("aside", { className: "fixed left-0 top-0 h-full w-64 border-r border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 p-6 hidden md:flex flex-col z-20" }, React.createElement("h1", { className: "text-2xl font-bold mb-8" }, "LifeOS"), React.createElement("nav", { className: "space-y-2 flex-1 overflow-y-auto no-scrollbar" }, Object.keys(tabConfig).filter(t => t !== 'profile').map(t => React.createElement(NavItem, { key: t, icon: tabConfig[t].icon, label: tabConfig[t].label, active: activeTab === t, onClick: () => setActiveTab(t) }))), React.createElement("div", { className: "pt-6 border-t border-zinc-200 dark:border-zinc-800 space-y-2" }, React.createElement("button", { onClick: () => setShowSettings(true), className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-900 mb-2 transition-colors" }, React.createElement(Settings, { size: 20 }), "Cloud Sync"), React.createElement("button", { onClick: () => setDarkMode(!darkMode), className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-900 mb-2 transition-colors" }, darkMode ? React.createElement(Sun, { size: 20 }) : React.createElement(Moon, { size: 20 }), darkMode ? "Light Mode" : "Dark Mode"), React.createElement("button", { onClick: () => setActiveTab('profile'), className: "w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-900 transition-colors" }, React.createElement("div", { className: "w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center text-[10px] font-bold text-white uppercase" }, (user.user_metadata?.full_name || user.displayName || user.email)[0]), React.createElement("span", { className: "font-medium text-sm truncate" }, "My Profile")))),
                React.createElement(MobileTopBar, { handleLogout, user, darkMode, toggleDarkMode: () => setDarkMode(!darkMode), onProfileClick: () => setActiveTab('profile') }),
                React.createElement(MobileNavBar, { activeTab, setActiveTab, tabConfig }),
                React.createElement("main", { className: "md:ml-64 p-4 md:p-8 pb-24 pt-20 md:pt-8 min-h-screen box-border" },
                    activeTab === 'dashboard' && React.createElement(DashboardView, { onNavigate: setActiveTab, deadlines, dashboardData, onUpdateDashboard: handleUpdateDashboard, timerState: focusState, toggleTimer: handleTimerToggle, resetTimer: handleTimerReset, meals, fitnessData, goalsData, dumps, books }),
                    activeTab === 'monthlyPlan' && React.createElement(MonthlyPlanView, { plan: monthlyPlan, onUpdate: handleUpdateMonthlyPlan }),
                    activeTab === 'weeklyPlan' && React.createElement(WeeklyPlanView, { plan: weeklyPlan, onUpdate: handleUpdateWeeklyPlan }),
                    activeTab === 'dailyPlan' && React.createElement(DailyPlanView, { plan: dailyPlan, onUpdate: handleUpdateDailyPlan }),
                    activeTab === 'goals2026' && React.createElement(Goals2026View, { goalsData, onUpdateGoals: handleUpdateGoals2026 }),
                    activeTab === 'deadlines' && React.createElement(DeadlinesView, { deadlines, onAddDeadline: handleAddDeadline, onDeleteDeadline: handleDeleteDeadline }),
                    activeTab === 'focus' && React.createElement(FocusView, { activeSound, isPlayingSound, toggleSound, timerState: focusState, toggleTimer: handleTimerToggle, resetTimer: handleTimerReset }),
                    activeTab === 'braindump' && React.createElement(BrainDumpView, { dumps, onAddDump: handleAddDump, onDeleteDump: handleDeleteDump }),
                    activeTab === 'fitness' && React.createElement(FitnessView, { fitnessData, onUpdateFitness: handleUpdateFitness }),
                    activeTab === 'food' && React.createElement(FoodView, { meals, onUpdateMeal: handleUpdateMeal, onAIGenerate: generateAIMealPlan }),
                    activeTab === 'tools' && React.createElement(ToolsView, { tools, categories: toolCategories, onAddTool: handleAddTool, onAddCategory: handleAddCategory, onDeleteCategory: handleDeleteCategory, onRenameCategory: handleRenameCategory, onDeleteTool: handleDeleteTool, onUpdateTool: handleUpdateTool }),
                    activeTab === 'library' && React.createElement(LibraryView, { books, categories: bookCategories, onAddBook: handleAddBook, onDeleteBook: handleDeleteBook, onUpdateBook: handleUpdateBook, onAddCategory: handleAddBookCategory, onDeleteCategory: handleDeleteBookCategory, onRenameCategory: handleRenameBookCategory }),
                    activeTab === 'profile' && React.createElement(ProfileView, { user, onLogout: handleLogout, onUpdateProfile: handleUpdateProfile })
                ),
                showSettings && React.createElement(SettingsView, { onClose: () => setShowSettings(false), onSave: () => window.location.reload() })
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
